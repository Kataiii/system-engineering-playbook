<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>system-engineering-playbook</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="src/_assets/custom.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">system-engineering-playbook</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="техническое-задание-мобильного-приложения-дневника-тренировок-с-ии-тренером-для-умного-планирования-адаптации-нагрузок-и-мотивационной-поддержки" class="unnumbered"><a class="header" href="#техническое-задание-мобильного-приложения-дневника-тренировок-с-ии-тренером-для-умного-планирования-адаптации-нагрузок-и-мотивационной-поддержки">Техническое задание «<strong>Мобильного приложения-дневника тренировок с ИИ-тренером для умного планирования, адаптации нагрузок и мотивационной поддержки»</strong></a></h1>
<p><a href="https://disk.yandex.ru/i/dIW55V4yci_6WA">Ссылка на документ</a></p>
<p>Оглавление</p>
<p>Техническое задание «Мобильного приложения-дневника тренировок с
ИИ-тренером для умного планирования, адаптации нагрузок и мотивационной
поддержки»</p>
<ol>
<li>Введение</li>
</ol>
<p>1.1. Назначение</p>
<p>1.2. Термины:</p>
<p>1.2.1. Общие термины</p>
<p>1.2.2. Бизнес термины</p>
<p>1.2.3. Технические термины</p>
<ol start="2">
<li>Общее описание</li>
</ol>
<p>2.1. Назначение документа</p>
<p>2.2. Обзор продукта</p>
<p>2.3. Функции продукта</p>
<p>2.4. Характеристики пользователей</p>
<ol start="3">
<li>Функциональные требования</li>
</ol>
<p>3.1. Вариант использования «Создание тренировки через ИИ-тренера»</p>
<p>3.2. Вариант использования «Изменение тренировочного процесса»</p>
<p>3.3. Вариант использования «Создание тренировки вручную»</p>
<p>3.4. Вариант использования «Процесс тренировки»</p>
<p>3.5. Вариант использования «Поиск упражнения»</p>
<p>3.6. Вариант использования «Просмотр тренировочного процесса»</p>
<p>3.7. Вариант использования «Редактирование тренировки»</p>
<ol start="4">
<li>Дополнительные функциональные требования</li>
</ol>
<p>4.1. Аналитика</p>
<p>4.2. Сбои</p>
<p>4.3. Обратная связь</p>
<p>4.4. Экспорт в виде таблицы.</p>
<ol start="5">
<li>Нефункциональные требования</li>
</ol>
<p>5.1. Интерфейс пользователя:</p>
<p>5.2. Безопасность</p>
<p>5.3. Доступность</p>
<p>5.4. Совместимость</p>
<p>5.5. Удобство</p>
<p>5.6. Поддержка и обслуживание</p>
<ol start="6">
<li>Требования к приеме-сдаче проекта</li>
</ol>
<h1 id="Введение"><a class="header" href="#Введение">Введение</a></h1>
<h2 id="Назначение"><a class="header" href="#Назначение">Назначение</a></h2>
<p>Назначение данного документа для разработки мобильного приложения с
ИИ-тренером, предназначенного для автоматизации управления тренировочным
процессом пользователя. Система обеспечивает персонализацию и повышение
эффективности тренировок за счет непрерывного анализа данных и адаптации
нагрузок.</p>
<h2 id="Термины"><a class="header" href="#Термины">Термины:</a></h2>
<h2 id="Общие-термины"><a class="header" href="#Общие-термины">Общие термины</a></h2>
<p><strong>ВИ</strong> -- Вариант Использования или Use Case.</p>
<p><strong>ПО</strong> - программное обеспечение.</p>
<p><strong>МП</strong> - мобильное приложение.</p>
<p><strong>Устройство -</strong> мобильный телефон на котором происходит работа
разрабатываемого приложения.</p>
<p><strong>Система</strong> - мп дневника тренировок с ИИ-тренером для умного
планирования, адаптации нагрузок и мотивационной поддержки.</p>
<p><strong>ОС</strong> - операционная система.</p>
<h2 id="Бизнес-термины"><a class="header" href="#Бизнес-термины">Бизнес термины</a></h2>
<p><strong>Тренировочный процесс -</strong> комплекс тренировок, отделенных определеным
промежутком времени друг от друга, позволяющих при полном выполнении
использовать все группы мышц.</p>
<p><strong>Тр</strong> - тренировка.</p>
<p><strong>Сплит</strong> - тренировочный процесс делится на дни, посвященные разным
мышечным группам.</p>
<p><strong>Фуллбади</strong> - тренировочный процесс предусматривает использование всех
групп мышц в рамках одной тренировки</p>
<p><strong>Круговая тренировка</strong> - тренировка, состоящая из последовательности
упражнений (станций), выполняемых одно за другим с минимальным отдыхом.
После завершения круга следует отдых, и цикл повторяется.</p>
<p><strong>Суперсет</strong> - Последовательное выполнение двух упражнений без отдыха
между ними.</p>
<p><strong>Трисет -</strong> Последовательное выполнение трех упражнений без отдыха
между ними.</p>
<p><strong>Гигантский сет</strong> - Последовательное выполнение четырех и более
упражнений без отдыха.</p>
<p><strong>Дроп-сет</strong> - Метод повышения интенсивности, при котором после отказа в
упражнении вес сразу уменьшается (на 20-25%), и подход продолжается без
полноценного отдыха. Может быть двойным, тройным и т.д.</p>
<p><strong>Рабочий вес</strong> - Вес отягощения, используемый для выполнения
запланированных подходов и повторений.</p>
<p><strong>Повторение</strong> - Одно полное движение упражнения от начальной до
конечной точки и обратно.</p>
<p><strong>Подход</strong> - Непрерывная серия повторений одного упражнения.</p>
<p><strong>Целевая мышца</strong> - Основная мышечная группа, на которую направлено
упражнение.</p>
<p><strong>Мышцы-синергисты</strong> - Мышцы, которые помогают целевой мышце в
выполнении движения.</p>
<p><strong>Мышцы-стабилизаторы</strong> - Мышцы, которые фиксируют положение суставов и
тела во время упражнения.</p>
<p><strong>Мышцы-антагонисты</strong> - это пары мышечных групп, которые выполняют
противоположные движения вокруг одного и того же сустава, например,
сгибание и разгибание. Например, бицепс сгибает локоть, а трицепс ---
разгибает</p>
<p><strong>Альтернативное упражнение -</strong> схожее упражнение с другим, с которым
оно будет чередоваться в рамках выполнения тренировки.</p>
<h2 id="Технические-термины"><a class="header" href="#Технические-термины">Технические термины</a></h2>
<p><strong>ИИ</strong> - искусственный интеллект.</p>
<p><strong>API</strong> - Набор правил и методов, с помощью которых фронтенд
(приложение) взаимодействует с бэкендом.</p>
<p><strong>Оффлайн-режим</strong> - Возможность работы с приложением (просмотр планов,
запись выполненных упражнений) без подключения к интернету с последующей
синхронизацией.</p>
<p><strong>SDK</strong> - Набор инструментов от стороннего поставщика для интеграции его
услуг в ваше приложение.</p>
<p><strong>Push-уведомления</strong> - Сообщения, которые приходят на устройство даже
когда приложение не запущено.</p>
<p><strong>Тост</strong> - всплывающее сверху экрана на всю его ширину, небольшое
текстовое сообщение с возможность его закрыть нажатием на крестик, либо
свайпом всторону.</p>
<h1 id="Общее-описание"><a class="header" href="#Общее-описание">Общее описание</a></h1>
<h2 id="Назначение-документа"><a class="header" href="#Назначение-документа">Назначение документа</a></h2>
<p>В настоящем документе приводится полный набор требований к Системе,
необходимых для реализации.</p>
<p>Подпись Заказчика и Исполнителя на настоящем документе подтверждает их
согласие с нижеследующими фактами и условиями:</p>
<ol>
<li>
<p>При реализации необходимо выполнить работы в объёме, указанном в
настоящем Техническом Задании.</p>
</li>
<li>
<p>Все неоднозначности, выявленные в настоящем Техническом задании
после его подписания, подлежат двухстороннему согласованию между
Сторонами.</p>
</li>
</ol>
<h2 id="Обзор-продукта"><a class="header" href="#Обзор-продукта">Обзор продукта</a></h2>
<p>Система представляет собой мобильное приложение-дневник тренировок,
ключевой особенностью которого является встроенный ИИ-тренер. Продукт
функционирует как автономный цифровой помощник, автоматизирующий процесс
планирования, выполнения и адаптации фитнес-нагрузок. Основная ценность
системы заключается в способности анализировать пользовательские данные
и генерировать персонализированные тренировочные программы, обеспечивая
тем самым индивидуальный подход к каждому пользователю.</p>
<p>Приложение является самодостаточным решением и для базовой работы не
требует интеграции со сторонними системами. Для расширения
функциональности возможна опциональная синхронизация с сервисами
здоровья (Apple HealthKit, Google Fit) для автоматического сбора
показателей.</p>
<h2 id="Функции-продукта"><a class="header" href="#Функции-продукта">Функции продукта</a></h2>
<p>Ключевые функции системы включают:</p>
<ul>
<li>
<p>Создание тренировки (создать шаблон тренировку с возможность
добавлять в неё упражнение)</p>
</li>
<li>
<p>Создание тренировки по советам ИИ-тренера</p>
</li>
<li>
<p>Фиксация повторений (зафиксировать кол-во повторений для подхода, с
дальнейшим пересчетом рекомендованных повторений для дальнейших
подходов)</p>
</li>
<li>
<p>Просмотр созданных тренировок (просмотр календаря тренировок, с
указанными в них рекомендованным кол-во повторений на подход в
упражнении)</p>
</li>
<li>
<p>Редактирование тренировок</p>
</li>
<li>
<p>Поиск упражнений (поиск в общем списке, по названию, также с
возможностью фиксации, также приложение должно исеть возможность
выдать рекомендованные упражнения)</p>
</li>
<li>
<p>Фильтрация упражнений (по группам мышц, по мышцам-фиксатора и т.д)</p>
</li>
<li>
<p>Умный подбор упражнений (на мышцы-антогонисты)</p>
</li>
<li>
<p>Просмотр / получние мотивирующих сообщений от тренера при достижении
успехов</p>
</li>
<li>
<p>Просмотр / получение выговоров от тренера при пропуске тернировок</p>
</li>
</ul>
<h2 id="Характеристики-пользователей"><a class="header" href="#Характеристики-пользователей">Характеристики пользователей</a></h2>
<ol>
<li>
<p>Новички - люди без опыта тренировок, нуждающиеся в базовых
программах и детальных инструкциях.</p>
</li>
<li>
<p>Любители - регулярно занимающиеся спортом пользователи со средним
уровнем подготовки, нуждающие в удобной системе поддержки мотивации
и удобном управлении календарем тренировок.</p>
</li>
<li>
<p>Продвинутые - опытные спортсмены, требующие сложных программ и
детальной аналитики, прогрессии и т.д.</p>
</li>
</ol>
<h1 id="Функциональные-требования"><a class="header" href="#Функциональные-требования">Функциональные требования</a></h1>
<h2 id="Вариант-использования-Создание-тренировки-через-ИИ-тренера"><a class="header" href="#Вариант-использования-Создание-тренировки-через-ИИ-тренера">Вариант использования «Создание тренировки через ИИ-тренера»</a></h2>
<p><strong>Цель:</strong> Получить и подтвердить персонализированный план тренировки,
автоматически сгенерированный ИИ на основе данных пользователя. На
выходе получаем шаблон тренировки/тренировочного процесса.</p>
<p><strong>Предусловие:</strong> Нет</p>
<p><strong>Основной поток:</strong></p>
<ol>
<li>
<p>Пользователь перешел к этапу создания тренировки / тренировочной
программы через ИИ-тренера</p>
</li>
<li>
<p>Система из профиля получает необходимые данные для более корректного
подбора упражнений</p>
</li>
<li>
<p>Система уточняет у пользователя варианты создания (отдельная
тренировка, тренировочная программа)</p>
</li>
<li>
<p>Пользователь вносит данные о желаемой тренировки (продолжительность,
тип тренировки (сплит, фуллбоди), место тренировки (дом, улица,
зал), цель тренировки (массонабор, похудение, поддержание в тонусе),
сущетсвующий шаблон тенировки (опционально)), если пользователь до
этого не создавал тренировки через ИИ-тренера, иначе система
показывает уже предзаполненную форму</p>
</li>
<li>
<p>Система генерирует тренировку/тренировочный процесс, с возможность
«Отменить»</p>
</li>
<li>
<p>После успешной генерации, у пользователя есть возможность, изменить
вручную тренировку / тренировочную программу,подтвердить, закрыть
созданное.</p>
</li>
<li>
<p>После подтверждения тренировки добавляются в личное расписание.</p>
<p><strong>Альтернативные потоки:</strong></p>
<p><strong>Пользователь не заполнил данные в профиле:</strong></p>
</li>
<li>
<p>На этапе 3.1.2 в профиле не оказалось нужных данных, либо есть
данные заполнены не полностью.</p>
</li>
<li>
<p>Если обязательные данные заполнены, система показывает окно, с
предложением дозаполнить данные для более правильного создания
тренировки. Окно возможно закрыть и перейти в п. 3.1.3 основного
потока.</p>
</li>
<li>
<p>Основные данные незаполнены, система показывает окно без возможности
продолжения основного потока, с возможность нажать кнопку «Отмена»,
если данные заполнены, они запоминаются в профиль, окно закрывается,
происходит переход в п. 3.1.3 основного потока.</p>
</li>
<li>
<p>При нажатии на кнопку «Отмена», сценарий создания тренировки через
ИИ заканчивается.</p>
<p><strong>Пользователь отменяет генерацию:</strong></p>
</li>
<li>
<p>На этапе 3.1.5. при нажатии на кнопку «Отменить», либо при нажатии
на системную кнопку «Назад» система спрашивает подверждение.</p>
</li>
<li>
<p>При подтвеждении генерация заканчивается, происходит переход на этап
3.1.4. основного потока.</p>
<p><strong>Пользователь добавляет тренировку в календарь:</strong></p>
</li>
<li>
<p>На этапе 3.1.7. если пользователь создал тренировочный процесс, то
система предлагает дни недели выполнения отдельных тренировок
(например нечетные дни недели или четные)</p>
</li>
<li>
<p>Также пользователю предоставляет возможность добавить тренировку(и)
в Google calendar, системное приложение календаря.</p>
</li>
<li>
<p>При отмене происходит выход из сценария</p>
</li>
<li>
<p>При добавлении, появляется индикация добавления в календарь</p>
</li>
<li>
<p>При ошибке на этапе 3.1.19, показывается тост с ошибкой, происходит
выход из сценария.</p>
</li>
<li>
<p>При успешном добавлении, показывается тост с подтверждением
синхронизации календарей, происходит выход из сценария.</p>
<p><strong>Ошибка при получении данных профиля:</strong></p>
</li>
<li>
<p>На этапе 3.1.2 происходит ошибка получения данных</p>
</li>
<li>
<p>Показывается тост с тексом ошибки</p>
</li>
<li>
<p>Переход к альтернативному сценарию <strong>«Пользователь не заполнил
данные в профиле»</strong></p>
<p><strong>Ошибка при генерации тренировки /тренировочного процесса:</strong></p>
</li>
<li>
<p>На этапе 3.1.5. происходит ошибка</p>
</li>
<li>
<p>Система показывает тост с ошибкой и переводит на п. 3.1.4. основного
сценария.</p>
<p><strong>У пользователя есть активный тренировочный процесс:</strong></p>
</li>
<li>
<p>На этапе 3.1.7, если у пользователя уже есть активный тренировочный
процесс.</p>
</li>
<li>
<p>Если пользователь создал новый тренировочный процесс, то система
спрашивает желает ли он заменить текущий на новой, с вариантами
«Нет», «Да».</p>
</li>
<li>
<p>При нажатии на «Нет», новый тренировочный процесс добавляется в
резерв, в календаре не происходит никаких изменений. Основной
сценарий заканчивается.</p>
</li>
<li>
<p>При нажатии на «Да», новый тренировочный процесс становится
активным, просиходит переход на сценарий <strong>«Пользователь добавляет
тренировку в календарь»</strong></p>
</li>
<li>
<p>Если пользователь создал отдельную тренировку, то система спрашивает
хочет ли он изменить существующий тренировочный процесс или добавить
тренировку в резерв.</p>
</li>
<li>
<p>При добавлении в резерв происходит выход из сценария, календарь не
изменяется.</p>
</li>
<li>
<p>При изменение тренировочного процесса происходит переход в <strong>ВИ
«Изменение тренировочного процесса».</strong></p>
<p><strong>Бизнес-правила:</strong></p>
</li>
<li>
<p>Для генерации релевантного плана ИИ-тренер требует минимум 5
заполненных полей профиля (опыт, вес, рост).</p>
</li>
<li>
<p>Пользователь может иметь не более 3 тренировочных программ
одновременно, включая активную.</p>
</li>
<li>
<p>В тренировочной программе не может быть более 7 тренировок.</p>
</li>
<li>
<p>Тренировочная программа не должна быть только на одну группу мышц.</p>
</li>
</ol>
<h2 id="Вариант-использования-Изменение-тренировочного-процесса"><a class="header" href="#Вариант-использования-Изменение-тренировочного-процесса">Вариант использования «Изменение тренировочного процесса»</a></h2>
<p><strong>Цель:</strong> Изменить тренировочный процесс</p>
<p><strong>Предусловие:</strong> У пользователя есть тренировочный процесс.</p>
<p><strong>Основной поток:</strong></p>
<ol start="36">
<li>
<p>Пользователю отображаются тренировки в рамках текущего
тренировочного процесса, а также возможность «Отменить»,
«Сохранить», а также добавить, заменить, изменить, удалить
тренировку, изменить порядок, добавить в календарь (Google,
системный)</p>
</li>
<li>
<p>При нажатии на «Отменить» просиходит завершение сценария.</p>
</li>
<li>
<p>При попытке заменить тренировку, отображаются окно с наиболее
подходящими тренировками на замену.</p>
</li>
<li>
<p>При нажатии на тренировку, она выделяется и предлагается возможность
подтведить выбор, либо закрыть окно.</p>
</li>
<li>
<p>При подтвеждении тренировка заменяется.</p>
</li>
<li>
<p>При попытке удалить тренировку, необходимо подтвердить удаление.</p>
</li>
<li>
<p>При добавлении тренировки, предоставляется список тренировок,
ранжированных от наиболее подходящих к менее подходящим.</p>
</li>
<li>
<p>При выборе, необходимо подвердить, после чего тренировка добавляется
в тр. процесс.</p>
</li>
<li>
<p>При попытке изменить порядок тренировок, происходит синхронизация с
календарем (при наличии интеграции)</p>
</li>
<li>
<p>При ошибке синхронизации, пользователю показывается тост с
соответствующей ошибкой.</p>
</li>
<li>
<p>При попытке добавить в календарь, текущий личный календарь тр.
процесса добавляется в календарь (Google, системный)</p>
<p><strong>Альтернативные потоки:</strong></p>
<p><strong>У пользователя при отмене были изменения</strong></p>
</li>
<li>
<p>На этапе 3.2.2. при использовании «Отменить», отображается окно с
подтвежлением отмены.</p>
</li>
<li>
<p>При подтвеждении происходит завершение сценария.</p>
</li>
<li>
<p>При отменени подтвеждения просиходит возвращение к основному потоку.</p>
<p><strong>У пользователя нет подходящих тренировок на замену.</strong></p>
</li>
<li>
<p>Вместо функции «Заменить», появлется функция «Создать замену»</p>
</li>
<li>
<p>При использовании функции просиходит переход на <strong>ВИ «Создание
тренировки через ИИ-тренера»</strong> c предвыбранной пунктом «тренировка»
на этапе 3.1.3 (без возможности изменения), и с предзаполненными
данными на этапе 3.1.4.</p>
</li>
<li>
<p>При ошибке генерации тренировки выводится тост с ошибкой и
просиходит переходит переход к основному сценарию.</p>
</li>
<li>
<p>При успешной генерации просходит переход на основной сценарий,
тренировка помечается предвыбранной и происходит переход на п. 3.2.4
основного потока.</p>
<p><strong>Пользователь удаляет последюю тренировку в тр. процессе.</strong></p>
</li>
<li>
<p>На этапе 3.2.6 в подтвеждении указывается, что удаление тренировки
ведет к удалению тр. процесса.</p>
</li>
<li>
<p>При подверждении тр. процесс удаляется, сценарий завершается</p>
</li>
<li>
<p>При отмене, происходит переход к основному сценарию.</p>
<p><strong>У пользователя нет тренировок в резерве, либо все тренировки
являеются неудовлетворительными для тр. процесса.</strong></p>
</li>
<li>
<p>На этапе 3.2.7. если есть возможность создать подходящую тренировку,
показыватся функция «Создать тренировку»</p>
</li>
<li>
<p>При нажатии происходит переход на <strong>ВИ «Создание тренировки через
ИИ-тренера»</strong> c предвыбранной пунктом «тренировка» на этапе 3.1.3
(без возможности изменения), и с предзаполненными данными на этапе
3.1.4.</p>
</li>
<li>
<p>При ошибке генерации тренировки выводится тост с ошибкой и
просиходит переходит переход к основному сценарию.</p>
</li>
<li>
<p>При успешной генерации просходит переход на основной сценарий,
тренировка помечается предвыбранной и происходит переход на п. 3.2.8
основного потока.</p>
<p><strong>Пользователь добавил 7 тренировку в тр. процесс.</strong></p>
</li>
<li>
<p>После успешного доьавления тренировки п. 3.2.8, если тренировка 7,
то функция добавления тренрировка в текущий тр. процесс блокируется.</p>
<p><strong>Бизнес-правила:</strong></p>
</li>
<li>
<p>В тренировочной программе не может быть более 7 тренировок.</p>
</li>
<li>
<p>Тренировочная программа не должна быть только на одну группу мышц.</p>
</li>
</ol>
<h2 id="Вариант-использования-Создание-тренировки-вручную"><a class="header" href="#Вариант-использования-Создание-тренировки-вручную">Вариант использования «Создание тренировки вручную»</a></h2>
<p><strong>Цель:</strong> Создание тренировки, имея полный контроль над её
комплектацией.</p>
<p><strong>Предисловие:</strong> Нет</p>
<p><strong>Основной поток:</strong></p>
<ol start="64">
<li>
<p>Пользователь перешел на процесс создания тренировки.</p>
</li>
<li>
<p>Пользователь добавил упражнение.</p>
</li>
<li>
<p>Система предлагает пользователю подсказки:</p>
<ol>
<li>
<p>Альтернативное упражнение на эту же целевую мышцу, для
чередования</p>
</li>
<li>
<p>Упражнение на мышцу-антогониста, для создания супер-сета (если
возможно).</p>
</li>
<li>
<p>Кол-во подходов.</p>
</li>
<li>
<p>Время отдыха между подходами.</p>
</li>
<li>
<p>Время отдыха между упражнениями</p>
</li>
</ol>
</li>
<li>
<p>Пользователь добавил кол-во подходов для упражнения, также установил
время отдыха между подходами</p>
</li>
<li>
<p>Система показывает пользователю информацию о задействованных мышцах
данной тренировки и насколько эти мышцы задействованы, а также
предположительную продолжительность тернировки.</p>
</li>
<li>
<p>Пользователь сохранил тренировку и добавил в текущий тренировочный
процесс, либо в «Резерв».</p>
<p><strong>Альтернативные потоки:</strong></p>
<p><strong>Пользователь установил опасное время отдыха:</strong></p>
</li>
<li>
<p>Пользователь установил «опасное» время отдыха, высчитывается по
принципу:</p>
<ol>
<li>
<p>Для пользователя без спортивного опыта - &lt; 2 мин.</p>
</li>
<li>
<p>Если есть синхронизация с фитнес-браслетов, то исходя из пульса
за время тренировок.</p>
</li>
<li>
<p>Для пользовтеля со спортивным опытом, &lt; 1 мин.</p>
</li>
</ol>
</li>
<li>
<p>Пользователю отображается баннер, что с информацией, что такое время
отдыха может навредить здоровью.</p>
</li>
<li>
<p>Если пользователь изменил время отдыха на «безопасное», система
убрала баннер.</p>
</li>
<li>
<p>Продолжение основного потока.</p>
<p><strong>Пользователь составил тренировку, нарушающие стандарты фитнеса:</strong></p>
</li>
<li>
<p>Все упражнения пользователя задействуют только одну целевую мышцу.</p>
</li>
<li>
<p>Система показывает предупреждающий баннер, что данная тренировка
может указать влияение на здоровье.</p>
</li>
<li>
<p>Продолжение основного потока.</p>
<p><strong>Пользователь закрывает приложение / экран создания тренировки.</strong></p>
</li>
<li>
<p>На этапе 3.3.5 основного потока у пользователя есть возможность
«отменить», при использование возможности отмены, сценарий
заканчивается, пользователь перенаправляется на экран откуда, начал
сценарий.</p>
</li>
<li>
<p>Пользователь выходит из приложения, тренировка сохраняется в
«Черновик»</p>
</li>
<li>
<p>Пользователь использует системную кнопку «назад», система предлагает
сохранить в «Черновик», с возможностью «Сохранить», «Не сохранять»</p>
</li>
<li>
<p>При нажатии на «Сохранить», тренировка сохраняется в «Черновик»,
сценарий заканчивается, пользователь переводится на экран откуда,
начал сценарий.</p>
</li>
<li>
<p>При нажатии на «Не сохранять» - повторение п. 3.3.14.</p>
<p><strong>У пользователя нет активного тренировочного процесса</strong></p>
</li>
<li>
<p>На этапе 3.3.6 у пользователя нету активного тр. процесса</p>
</li>
<li>
<p>Система предлагает пользователю создать пустой тр. процесс и
добавить в него тренировку.</p>
</li>
<li>
<p>Пользователь успешно создал тр. процесс, сценарий заканчивается.</p>
</li>
<li>
<p>Произошла ошибка при создании тр. процесса, пользователю отображаетя
сообщение с ошибкой и просиходит переход на п. 3.3.20.</p>
<p><strong>Бизнес-правила:</strong></p>
</li>
<li>
<p>В тренировку нельзя добавить больше 10 отдельных упражнения.</p>
</li>
<li>
<p>Тренировка имеет сосотояние завершенности, в состояние завершенности
происходит переход только при подтверждении пользователя.</p>
</li>
<li>
<p>«Черновик» не должен содержать более 3 тренировок.</p>
</li>
<li>
<p>«Резерв» не должен создержать более 6 тренировок.</p>
</li>
</ol>
<h2 id="Вариант-использования-Процесс-тренировки"><a class="header" href="#Вариант-использования-Процесс-тренировки">Вариант использования «Процесс тренировки»</a></h2>
<p><strong>Цель:</strong> Следование шаблоны тренировки, фикасация повторений и весов
для упражнений.</p>
<p><strong>Предисловие</strong>: Есть тренировка.</p>
<p><strong>Основной поток:</strong></p>
<ol start="90">
<li>
<p>Пользователь начал тренировку.</p>
</li>
<li>
<p>Система запускает таймер.</p>
</li>
<li>
<p>Система отображает пользователю список упражнений в текущей
тренировке по порядку, для упражнений есть возжность начать
упражнение.</p>
</li>
<li>
<p>Пользователь начал упражнение, система закрепляет нескрываемый
action-push с прогрессов выполнения упражнения, пользователю дается
возможность начать подход.</p>
</li>
<li>
<p>Пользователь начал подход, предоставляется возможность зафиксить
кол-во повторений и степень сложности за подход.</p>
</li>
<li>
<p>Система пересчитвает предполагаемое кол-во повторений для
последующих подходов и время отдыха.</p>
</li>
<li>
<p>Система запускает таймер отдыха между подходами.</p>
</li>
<li>
<p>Повторение п. 3.4.5 - 3.4.7, пока пользователь не решит закончить
упражнение, либо пока не закончатся подходы.</p>
</li>
<li>
<p>Пользователь завершил упражнение.</p>
</li>
<li>
<p>Запускается таймер отдыха между упражнениями.</p>
</li>
<li>
<p>Action-push пропадает</p>
</li>
<li>
<p>Повтрорение п. 3.4.3 - 3.4.8.</p>
</li>
<li>
<p>Пользователь заканчивает тренировку.</p>
</li>
<li>
<p>Результаты тренировки записываются в историю.</p>
<p><strong>Альтернативные потоки:</strong></p>
<p><strong>Таймер истек:</strong></p>
</li>
<li>
<p>На п. 3.4.7, 3.4.10, по истечению таймера подается звуковой сигнал.</p>
</li>
<li>
<p>Продолжение основного потока.</p>
<p><strong>Пользователь забыл завершить тренировку:</strong></p>
</li>
<li>
<p>На п. 3.4.13 пользователь не завершил тренировку.</p>
</li>
<li>
<p>Спустя 20 минут, после последнего действия, система отправляет
push-уведомление, с уточнением о завершении тренировки.</p>
</li>
<li>
<p>Пользователь перешел по пушу, основной поток пролжается.</p>
</li>
<li>
<p>Спустя 1ч после последнего действия, система автоматически
завершает тренировку и отправляет push-уведомление об оповещении,
что тренировка закончена.</p>
<p><strong>Пользователь побил рекорд:</strong></p>
</li>
<li>
<p>Пользователь побил один из своих рекордов.</p>
</li>
<li>
<p>Система отправляет push-уведомление с мотивирующим содержанием.</p>
</li>
<li>
<p>Продолжение основного потока.</p>
<p><strong>Бизнес-правила:</strong></p>
</li>
<li>
<p>Пользователь не может внести отрицательное число в кол-во
повторений.</p>
</li>
</ol>
<h2 id="Вариант-использования-Поиск-упражнения"><a class="header" href="#Вариант-использования-Поиск-упражнения">Вариант использования «Поиск упражнения»</a></h2>
<p><strong>Цель</strong>: Найти упражнение по установленным критериям для добавления в
тренировку или получения информации.</p>
<p><strong>Предусловие</strong>: Нет</p>
<p><strong>Основной поток:</strong></p>
<ol start="114">
<li>
<p>Пользователь перешел на экран поиска упражнений из библиотеки
системы.</p>
</li>
<li>
<p>Система отображает пользователю поле для текстового поиска, фильтры
и кнопку и блок «Рекомандации от ИИ».</p>
</li>
<li>
<p>Пользователь может использовать один из способов поиска:</p>
<ol>
<li>
<p>Текстовый поиск: вводит название упражнения в поле поиска</p>
</li>
<li>
<p>Фильтрация: выбирает параметры из предложенных фильтров</p>
</li>
<li>
<p>Умное предложение, система на основе контекста предлагает
варианты упражнений</p>
</li>
</ol>
</li>
<li>
<p>При выборе текстового поиска пользователь вводит название
упражнения, система отображает совпадения в реальном времени,
отсортированные по релевантности.</p>
</li>
<li>
<p>При выборе фильтрации пользователь может применить следующие
фильтры:</p>
<ol>
<li>
<p>По целевой мышце (грудь, спина, ноги, плечи и т.д)</p>
</li>
<li>
<p>По мышцам-синергистам</p>
</li>
<li>
<p>По мышцам-стабилизаторам</p>
</li>
<li>
<p>По типу упражнения (базовое, изолирующее)</p>
</li>
<li>
<p>По необходимому инвентарю (штанга, гантели, тренажер, без
инвентаря)</p>
</li>
<li>
<p>По месту выполнения (дом, улица, зал)</p>
</li>
<li>
<p>По уровню сложности (новичок, любитель, продвинутый)</p>
</li>
<li>
<p>По типу движения (жим, тяга, приседание и т.д)</p>
</li>
</ol>
</li>
<li>
<p>Система отображает результаты поиска со следующей информацией для
каждого упражнения:</p>
<ol>
<li>
<p>Название упражнения</p>
</li>
<li>
<p>Целевая мышца и мышцы-помощники</p>
</li>
<li>
<p>Изображение/видео выполнения</p>
</li>
<li>
<p>Краткое описание техники</p>
</li>
<li>
<p>Требуемый инвентарь</p>
</li>
</ol>
</li>
<li>
<p>Пользователь выбирает интересующее упражнение, система отображает
расширенную информацию с возможностью:</p>
</li>
<li>
<p>Добавить упражнение в текущую тренировку</p>
</li>
<li>
<p>Просмотреть полное описание техники</p>
</li>
<li>
<p>При добавлении упражнения происходит переход в ВИ «Создание
тренировки вручную» или ВИ «Редактирование тренировки».</p>
<p><strong>Альтернативные потоки:<br />
Поиск не дал результатов:</strong></p>
</li>
<li>
<p>На этапе 3.5.7, не найдено ни одного упражнения.</p>
</li>
<li>
<p>Пользователю отображается текст с рекомендациями:</p>
<ol>
<li>
<p>Изменить фильтры.</p>
</li>
<li>
<p>Проверить правильность запроса.</p>
</li>
</ol>
</li>
<li>
<p>Пользователь продолжает основной поток.</p>
<p><strong>Нет рекомендаций от ИИ-тренера:</strong></p>
</li>
<li>
<p>На п. 3.5.1, система не имеет контекста для анализа необходимых
тренировок.</p>
</li>
<li>
<p>Блок «Ремондации от ИИ» не отображается.</p>
<p><strong>Пользователь ищеет упражнение для замены / совмещения:</strong></p>
</li>
<li>
<p>Пользователь перешел на п. 3.5.1 с контекстом:</p>
<ol>
<li>
<p>Упражнение</p>
</li>
<li>
<p>Информацией искомое упражнение нужно как замена, либо как
совмешение.</p>
</li>
</ol>
</li>
<li>
<p>На экране предуставновлены фильтры согласно контексту.</p>
</li>
<li>
<p>Продолжение с п. 3.5.7 основного потока.</p>
<p><strong>Бизнес-правила:</strong></p>
</li>
<li>
<p>Максимум 5 активных фильтров одновременно для оптимальной
производительности.</p>
</li>
<li>
<p>Система должна помнить последние 5 выполненных поисков пользователя
для быстрого доступа</p>
</li>
</ol>
<h2 id="Вариант-использования-Просмотр-тренировочного-процесса"><a class="header" href="#Вариант-использования-Просмотр-тренировочного-процесса">Вариант использования «Просмотр тренировочного процесса»</a></h2>
<p><strong>Цель</strong>: Просмотреть, отредактировать и управлять тренировочным
процессом (программой) с возможностью изменения составных тренировок.</p>
<p><strong>Предусловие</strong>: У пользователя есть активный или сохраненный
тренировочный процесс.</p>
<p><strong>Основной поток:</strong></p>
<ol start="134">
<li>
<p>Пользователь перешел на экран просмотра тренировочного процесса.</p>
</li>
<li>
<p>Система отображает информацию о тренировочном процессе:</p>
<ol>
<li>
<p>Название и описание программы</p>
</li>
<li>
<p>Тип программы (сплит, фуллбади, круговая)</p>
</li>
<li>
<p>Список всех тренировок в процессе по порядку их выполнения на
неделе.</p>
</li>
</ol>
</li>
<li>
<p>Отоюражение текущую неделю с тренировки со следующей индикацией:</p>
<ol>
<li>
<p>Предстоящая тренировка.</p>
</li>
<li>
<p>Завершенные тренировки.</p>
</li>
<li>
<p>Пропущенные тренировки.</p>
</li>
</ol>
</li>
<li>
<p>Система отображает для каждой тренировки в процессе:</p>
<ol>
<li>
<p>Название тренировки</p>
</li>
<li>
<p>День недели выполнения (если привязано к календарю)</p>
</li>
<li>
<p>Целевые мышцы программы</p>
</li>
<li>
<p>Кол-во упражнений в тренировке</p>
</li>
<li>
<p>Предполагаемую продолжительность</p>
</li>
</ol>
</li>
<li>
<p>Пользователю доступна возможность редактировать тр. процесс, при
нажатии просиходит переход в <strong>ВИ «Изменение тренировочного
процесса»</strong></p>
</li>
<li>
<p>Пользователь может переместить текущий тр. процесс в «Резерв», если
он является активным.</p>
</li>
<li>
<p>Пользователь может удалить текущий тр. процесс.</p>
<p><strong>Бизнес-правила:</strong></p>
</li>
<li>
<p>В тренировочном процессе не может быть более 7 тренировок.</p>
</li>
<li>
<p>Тренировочный процесс должен содержать упражнения, задействующие
минимум 3 различные группы мышц.</p>
</li>
<li>
<p>Пользователь может иметь максимум 3 тренировочных процесса
одновременно (1 активный + 2 в резерве).</p>
</li>
</ol>
<h2 id="Вариант-использования-Редактирование-тренировки"><a class="header" href="#Вариант-использования-Редактирование-тренировки">Вариант использования «Редактирование тренировки»</a></h2>
<p><strong>Цель</strong>: Позволить пользователю изменить состав, структуру и параметры
тренировки согласно своим предпочтениям или рекомендациям ИИ.</p>
<p><strong>Предусловие</strong>: Сущетсвует тренировка.</p>
<p><strong>Основной поток:</strong></p>
<ol start="144">
<li>
<p>Пользователь на экране редактирования тренировки.</p>
</li>
<li>
<p>Пользователю отображается список упражнений, со следующими
возможностями:</p>
<ol>
<li>
<p>Заменить упражнение, при нажатии происходит переход в <strong>ВИ
«Поиск упражнения»</strong> с контекстом поиска похожего упражнения,
при успехе упражнение заменяется.</p>
</li>
<li>
<p>Сделать супер-сет, при нажатии происходит переход в <strong>ВИ «Поиск
упражнения»</strong> с контекстом поиска упражнения на
мышцы-антогонисты, при успехе упражнение становится
супер-сетом.</p>
</li>
<li>
<p>Добавить альтернативу упражнению, при нажатии происходит
переход в <strong>ВИ «Поиск упражнения»</strong> с контекстом поиска
похожего упражнения, при успехе упражнение добавляется как
альтернативное.</p>
</li>
<li>
<p>Удалить упражнение.</p>
</li>
<li>
<p>Изменить кол-во подходов, время отдыха между подходами</p>
</li>
</ol>
</li>
<li>
<p>Пользователь может добавить новое упражнение, происходит переход в
<strong>ВИ «Поиск упражнения»</strong>, с контекстом текущей тренировки.</p>
</li>
<li>
<p>Изменить порядок упражнений.</p>
</li>
<li>
<p>Пользователь сохранил изменения.</p>
<p><strong>Альтернативные потоки:</strong></p>
<p><strong>Пользователь удаляет последнее упражнение.</strong></p>
</li>
<li>
<p>На этапе 3.7.2.4 если удаляемое упражнение является последним,
система отображает предупреждение с уведомлением, что при удаление
данного упражнения удалтся тренировка.</p>
</li>
<li>
<p>При подтверждении удаления, сценарий заканчивается.</p>
</li>
<li>
<p>При отмене происходит переход в основной поток.</p>
<p><strong>Пользователь добавляет 10 упражнение в тренировку:</strong></p>
</li>
<li>
<p>На этапе 3.7.3, при успешном добавлении 10 упражнения, возможность
добавлять новую исчезает.</p>
<p><strong>Пользователь решил не сохранять изменения/либо воспользоваться
системной кнопкой «Назад»:</strong></p>
</li>
<li>
<p>На этапе 3.7.5, пользователь решил «Отменить» результат.</p>
</li>
<li>
<p>Система требует подтвердить сброс измененных данных.</p>
</li>
<li>
<p>При подтверждение система возвращает тренировку в первоначальный
вид.</p>
</li>
<li>
<p>При отмене, происходит переход на п.3.7.5 основного потока.</p>
<p><strong>Пользователь закрыл приложения, не закончив редактирование:</strong></p>
</li>
<li>
<p>Пользователь на любом из пунктов основного потока, закрыл
приложение.</p>
</li>
<li>
<p>Система сохраяет дубликат тренировки с пометкой «Черновик» и датой
изменения в наименовании тренировки.</p>
</li>
<li>
<p>Система запоминает, что есть незаконченное редактирование
тренировки.</p>
</li>
<li>
<p>При последубщем входе в приложение пользователю отобразится баннер,
что у него есть незаконченный черновик тренировки.</p>
<p><strong>Бизнес правила:</strong></p>
</li>
<li>
<p>В тренировке не должно быть больше 10 упражнений.</p>
</li>
<li>
<p>Упражнения в тренировке не должны нарушать правила фитнеса.</p>
</li>
</ol>
<h1 id="Дополнительные-функциональные-требования"><a class="header" href="#Дополнительные-функциональные-требования">Дополнительные функциональные требования</a></h1>
<h2 id="Аналитика"><a class="header" href="#Аналитика">Аналитика</a></h2>
<p>Мобильное приложение должно быть интегрировано с инструментов сбора
аналитики, с возможностью изучить отслеживаемые показатели. Должны
собиратсья следующие данные:</p>
<ol start="163">
<li>
<p>Данные по переходам на экраны.</p>
</li>
<li>
<p>Информация о завершенности действия.</p>
</li>
<li>
<p>Информаци по переходе по пуш уведомлению.</p>
</li>
<li>
<p>Информация о своевременности исполнения пользователем следующих
дейтсвий:</p>
<ol>
<li>
<p>Функция подхода.</p>
</li>
<li>
<p>Завершение тренировки.</p>
</li>
<li>
<p>Начало подхода.</p>
</li>
</ol>
</li>
</ol>
<h2 id="Сбои"><a class="header" href="#Сбои">Сбои</a></h2>
<p>Система должна предоставлять возможность посмотреть кол-во сбоев, а
также детальную информацию по ним:</p>
<ol start="167">
<li>
<p>Пользователь.</p>
</li>
<li>
<p>Устройтсво пользователя.</p>
</li>
<li>
<p>Подробную информацию об ошибке.</p>
</li>
<li>
<p>Время.</p>
</li>
<li>
<p>Операционная система пользователя.</p>
</li>
</ol>
<pre><code class="language-{=html}">&lt;!-- --&gt;
</code></pre>
<ol start="4">
<li>
<p>[]{#_Toc15252 .anchor}<strong>Обратная связь</strong></p>
<p>Пользователю должна быть дана возможность оставить обратную связь по
следующим типам:</p>
<ol>
<li>
<p>Ошибка (описание ошибки).</p>
</li>
<li>
<p>Рекомендации по улучшению приложения.</p>
</li>
<li>
<p>Предложение. (для коммерческих предложений, необходимо указать
адрес электронной почты)</p>
</li>
</ol>
</li>
</ol>
<h2 id="Экспорт-в-виде-таблицы"><a class="header" href="#Экспорт-в-виде-таблицы">Экспорт в виде таблицы.</a></h2>
<p>Система должна предоставить возможность экспортировать истоию тренировок
в формате таблицы.</p>
<h1 id="Нефункциональные-требования"><a class="header" href="#Нефункциональные-требования">Нефункциональные требования</a></h1>
<h2 id="Интерфейс-пользователя"><a class="header" href="#Интерфейс-пользователя">Интерфейс пользователя:</a></h2>
<ol start="4">
<li>
<p>Интерфейс поддерживаем только русский язык.</p>
</li>
<li>
<p>Интерфейс должен быть адаптирован для смартфонов и планшетов.</p>
</li>
<li>
<p>Интерфейс должен быть исключительно в портретном режиме.</p>
</li>
<li>
<p>Интерфейс приложения должен быть интуитивно понятным и требовать
минимального обучения.</p>
</li>
<li>
<p>Интерфейс должен выглядить одинаково на всех ОС.</p>
</li>
</ol>
<h2 id="Безопасность"><a class="header" href="#Безопасность">Безопасность</a></h2>
<ol start="9">
<li>
<p>Шифрование локально хранимых пользовательских данных.</p>
</li>
<li>
<p>Соответствие законов РФ по обработке Пн.д.</p>
</li>
</ol>
<h2 id="Доступность"><a class="header" href="#Доступность">Доступность</a></h2>
<ol start="11">
<li>
<p>Приложение должно иметь возможность использоваться в оффлайн режиме,
не теряя основные функциональные возможности.</p>
</li>
<li>
<p>Приложение должны быть доступно к использованию пользователям с
нарушениями здоровья</p>
</li>
<li>
<p>Приложение должно работать одинаково на всех мобильных ОС.</p>
</li>
<li>
<p>Приложение должно корректно восстанавливать состояние после
неожиданного завершения работы.</p>
</li>
<li>
<p>Максимально допустимое количество критических ошибок - не более 1 на
1000 сессий.</p>
</li>
</ol>
<h2 id="Совместимость"><a class="header" href="#Совместимость">Совместимость</a></h2>
<ol start="16">
<li>
<p>Поддержка iOS 14 и выше</p>
</li>
<li>
<p>Поддержка Android 10 и выше</p>
</li>
<li>
<p>Поддержка ответвленных от Android ОС (HarmonyOS и т.д)</p>
</li>
</ol>
<h2 id="Удобство"><a class="header" href="#Удобство">Удобство</a></h2>
<ol start="19">
<li>
<p>Время обучения работе с основными функциями приложения - не более 10
минут.</p>
</li>
<li>
<p>Доступность основных функциональных возможностей менее чем за 3
экрана.</p>
</li>
</ol>
<h2 id="Поддержка-и-обслуживание"><a class="header" href="#Поддержка-и-обслуживание">Поддержка и обслуживание</a></h2>
<ol start="21">
<li>
<p>Приложение должно представлять собой единую кодовую базу</p>
</li>
<li>
<p>Система должна предоставлять встроенную форму обратной связи для
отправки отчетов об ошибках и предложений</p>
</li>
<li>
<p>Система должна собирать аналитику использования и crashlytics для
выявления проблем и улучшения продукта</p>
</li>
<li>
<p>Система должна поддерживать механизм удаленного обновления контента
без необходимости выпуска новых версий приложения</p>
</li>
</ol>
<h2 id="section" class="unnumbered"><a class="header" href="#section"></a></h2>
<h1 id="Требования-к-приеме-сдаче-проекта"><a class="header" href="#Требования-к-приеме-сдаче-проекта">Требования к приеме-сдаче проекта</a></h1>
<ol start="5">
<li>
<p>Исполнитель должен предоставить следующий комплект поставки при
сдаче проекта:</p>
<ol>
<li>
<p>Техническое задание</p>
</li>
<li>
<p>Исходный код Системы</p>
</li>
<li>
<p>Исполняемые модули Системы</p>
</li>
<li>
<p>Тестовые сценарии</p>
</li>
<li>
<p>Пользовательскую документацию</p>
</li>
</ol>
</li>
<li>
<p>Приемо-сдаточные испытания должны проводиться по каждому этапу
отдельно на сервере Заказчика в сроки, оговоренные договором.</p>
</li>
<li>
<p>Ход проведения приемо-сдаточных испытаний Заказчик и Исполнитель
документируют в</p>
</li>
<li>
<p>Протоколе проведения испытаний.</p>
</li>
<li>
<p>На основании Протокола проведения испытаний Исполнитель совместно с
Заказчиком подписывает Акт приемки-сдачи программы в эксплуатацию.</p>
</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Диаграммы-idef0"><a class="header" href="#Диаграммы-idef0">Диаграммы IDEF0</a></h1>
<h2 id="Сценарий-создания-тренировки"><a class="header" href="#Сценарий-создания-тренировки">Сценарий создания тренировки</a></h2>
<iframe class="drawio-viewer" src="https://viewer.diagrams.net/?highlight=0000ff&edit=_blank&layers=1&nav=1&title=diagram&url=https://raw.githubusercontent.com/Kataiii/system-engineering-playbook/main/src/diagrams/idef0_create_training.drawio"></iframe>
<h2 id="Сценарий-редактирования-тренировки"><a class="header" href="#Сценарий-редактирования-тренировки">Сценарий редактирования тренировки</a></h2>
<iframe class="drawio-viewer" src="https://viewer.diagrams.net/?highlight=0000ff&edit=_blank&layers=1&nav=1&title=diagram&url=https://raw.githubusercontent.com/Kataiii/system-engineering-playbook/main/src/diagrams/idef0_edit_training.drawio"></iframe>
<h2 id="Сценарий-ручного-создания-тренировки"><a class="header" href="#Сценарий-ручного-создания-тренировки">Сценарий ручного создания тренировки</a></h2>
<iframe class="drawio-viewer" src="https://viewer.diagrams.net/?highlight=0000ff&edit=_blank&layers=1&nav=1&title=diagram&url=https://raw.githubusercontent.com/Kataiii/system-engineering-playbook/main/src/diagrams/idef0.drawio"></iframe>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Диаграммы-idef3"><a class="header" href="#Диаграммы-idef3">Диаграммы IDEF3</a></h1>
<h2 id="Сценарий-создания-тренировки-1"><a class="header" href="#Сценарий-создания-тренировки-1">Сценарий создания тренировки</a></h2>
<iframe class="drawio-viewer" src="https://viewer.diagrams.net/?highlight=0000ff&edit=_blank&layers=1&nav=1&title=diagram&url=https://raw.githubusercontent.com/Kataiii/system-engineering-playbook/main/src/diagrams/idef3_create_training.drawio"></iframe>
<h2 id="Сценарий-редактирования-тренировки-1"><a class="header" href="#Сценарий-редактирования-тренировки-1">Сценарий редактирования тренировки</a></h2>
<iframe class="drawio-viewer" src="https://viewer.diagrams.net/?highlight=0000ff&edit=_blank&layers=1&nav=1&title=diagram&url=https://raw.githubusercontent.com/Kataiii/system-engineering-playbook/main/src/diagrams/idef3_edit_training.drawio"></iframe>
<h2 id="Сценарий-ручного-создания-тренировки-1"><a class="header" href="#Сценарий-ручного-создания-тренировки-1">Сценарий ручного создания тренировки</a></h2>
<iframe class="drawio-viewer" src="https://viewer.diagrams.net/?highlight=0000ff&edit=_blank&layers=1&nav=1&title=diagram&url=https://raw.githubusercontent.com/Kataiii/system-engineering-playbook/main/src/diagrams/idef3_create_manual_training.drawio"></iframe>
<h2 id="Сценарий-изменения-тренировочного-процесса"><a class="header" href="#Сценарий-изменения-тренировочного-процесса">Сценарий изменения тренировочного процесса</a></h2>
<iframe class="drawio-viewer" src="https://viewer.diagrams.net/?highlight=0000ff&edit=_blank&layers=1&nav=1&title=diagram&url=https://raw.githubusercontent.com/Kataiii/system-engineering-playbook/main/src/diagrams/idef3.drawio"></iframe>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Диаграммы-dfd"><a class="header" href="#Диаграммы-dfd">Диаграммы DFD</a></h1>
<h2 id="Сценарий-создания-тренировки-2"><a class="header" href="#Сценарий-создания-тренировки-2">Сценарий создания тренировки</a></h2>
<iframe class="drawio-viewer" src="https://viewer.diagrams.net/?highlight=0000ff&edit=_blank&layers=1&nav=1&title=diagram&url=https://raw.githubusercontent.com/Kataiii/system-engineering-playbook/main/src/diagrams/dfd_create_training.drawio"></iframe>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Диаграммы-uml"><a class="header" href="#Диаграммы-uml">Диаграммы UML</a></h1>
<h2 id="Сценарий-создания-тренировки-3"><a class="header" href="#Сценарий-создания-тренировки-3">Сценарий создания тренировки</a></h2>
<p>Диаграмма использования</p>
<iframe class="drawio-viewer" src="https://viewer.diagrams.net/?highlight=0000ff&edit=_blank&layers=1&nav=1&title=diagram&url=https://raw.githubusercontent.com/Kataiii/system-engineering-playbook/main/src/diagrams/usecase_create_training.drawio"></iframe>
<p>Диаграмма активности</p>
<iframe class="drawio-viewer" src="https://viewer.diagrams.net/?highlight=0000ff&edit=_blank&layers=1&nav=1&title=diagram&url=https://raw.githubusercontent.com/Kataiii/system-engineering-playbook/main/src/diagrams/activity_create_training.drawio"></iframe>
<p>Диаграмма классов
<img src="./img/class_create_training.png" alt="" /></p>
<p>Диаграмма пакетов
<img src="./img/packages_create_training.png" alt="" /></p>
<p>Диаграмма последовательности
@drawio{https://github.com/Kataiii/system-engineering-playbook/blob/main/src/diagrams/sequence _create_training.drawio}</p>
<p>Диаграмма состояний
<img src="./img/statechart_create_training.png" alt="" /></p>
<h2 id="Сценарий-редактирования-тренировки-2"><a class="header" href="#Сценарий-редактирования-тренировки-2">Сценарий редактирования тренировки</a></h2>
<p>Диаграмма использования</p>
<iframe class="drawio-viewer" src="https://viewer.diagrams.net/?highlight=0000ff&edit=_blank&layers=1&nav=1&title=diagram&url=https://raw.githubusercontent.com/Kataiii/system-engineering-playbook/main/src/diagrams/usecase_edit_training.drawio"></iframe>
<p>Диаграмма активности</p>
<iframe class="drawio-viewer" src="https://viewer.diagrams.net/?highlight=0000ff&edit=_blank&layers=1&nav=1&title=diagram&url=https://raw.githubusercontent.com/Kataiii/system-engineering-playbook/main/src/diagrams/activity_edit_training.drawio"></iframe>
<p>Диаграмма классов
<img src="./img/class_edit_training.png" alt="" /></p>
<p>Диаграмма пакетов
<img src="./img/packages_edit_training.png" alt="" /></p>
<p>Диаграмма последовательности
<img src="./img/sequence_edit_training1.png" alt="" /></p>
<p>Диаграмма состояний
<img src="./img/statechart_edit_training.png" alt="" /></p>
<h2 id="Сценарий-создания-тренировки-вручную"><a class="header" href="#Сценарий-создания-тренировки-вручную">Сценарий создания тренировки вручную</a></h2>
<p>Диаграмма использования</p>
<iframe class="drawio-viewer" src="https://viewer.diagrams.net/?highlight=0000ff&edit=_blank&layers=1&nav=1&title=diagram&url=https://raw.githubusercontent.com/Kataiii/system-engineering-playbook/main/src/diagrams/usecase_create_manual_training.drawio"></iframe>
<p>Диаграмма активности</p>
<iframe class="drawio-viewer" src="https://viewer.diagrams.net/?highlight=0000ff&edit=_blank&layers=1&nav=1&title=diagram&url=https://raw.githubusercontent.com/Kataiii/system-engineering-playbook/main/src/diagrams/activity_create_manual_training.drawio"></iframe>
<p>Диаграмма классов
<img src="./img/class_create_manual_training.png" alt="" /></p>
<p>Диаграмма пакетов
<img src="./img/packages_create_manual_training.png" alt="" /></p>
<p>Диаграмма последовательности
![](./img/sequence _create_manual_training1.png)</p>
<p>Диаграмма состояний
<img src="./img/statechart_create_manual_training.png" alt="" /></p>
<h2 id="Сценарий-процесса-тренировка"><a class="header" href="#Сценарий-процесса-тренировка">Сценарий процесса тренировка</a></h2>
<p>Диаграмма использования</p>
<iframe class="drawio-viewer" src="https://viewer.diagrams.net/?highlight=0000ff&edit=_blank&layers=1&nav=1&title=diagram&url=https://raw.githubusercontent.com/Kataiii/system-engineering-playbook/main/src/diagrams/usecase_training.drawio"></iframe>
<p>Диаграмма активности</p>
<iframe class="drawio-viewer" src="https://viewer.diagrams.net/?highlight=0000ff&edit=_blank&layers=1&nav=1&title=diagram&url=https://raw.githubusercontent.com/Kataiii/system-engineering-playbook/main/src/diagrams/activity_training.drawio"></iframe>
<p>Диаграмма классов
<img src="./img/class_training.png" alt="" /></p>
<p>Диаграмма пакетов
<img src="./img/packages_training.png" alt="" /></p>
<p>Диаграмма последовательности
<img src="./img/sequence_training1.png" alt="" /></p>
<p>Диаграмма состояний
<img src="./img/statechart_training.png" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Компонентная-схема-сервисов-мобильного-приложения"><a class="header" href="#Компонентная-схема-сервисов-мобильного-приложения">Компонентная схема сервисов мобильного приложения</a></h1>
<h2 id="Мобильное-приложение-клиентская-часть"><a class="header" href="#Мобильное-приложение-клиентская-часть">Мобильное приложение (клиентская часть)</a></h2>
<ol>
<li><strong>Пользовательский интерфейс</strong> - отображение данных и взаимодействие с пользователем</li>
<li><strong>Локальная нейросеть</strong> - умный поиск, мониторинг состояния, быстрые рекомендации</li>
<li><strong>Локальное хранилище</strong> - кэширование данных для офлайн-работы</li>
<li><strong>Менеджер синхронизации</strong> - управление синхронизацией с сервером</li>
</ol>
<h2 id="Серверная-часть-монолит-с-модулями"><a class="header" href="#Серверная-часть-монолит-с-модулями">Серверная часть (монолит с модулями)</a></h2>
<ol>
<li><strong>API Gateway</strong> - единая точка входа для всех запросов</li>
<li><strong>Сервис аутентификации</strong> - управление пользователями и доступом</li>
<li><strong>Сервис пользователей</strong> - профили, настройки, личные данные</li>
<li><strong>Сервис тренировок</strong> - управление тренировочными процессами и планами</li>
<li><strong>Сервис аналитики</strong> - анализ прогресса и эффективности тренировок</li>
<li><strong>Серверная нейросеть</strong> - генерация персонализированных тренировок, адаптация нагрузок</li>
<li><strong>Сервис уведомлений</strong> - мотивационные сообщения и напоминания</li>
</ol>
<h2 id="Системы-хранения-данных"><a class="header" href="#Системы-хранения-данных">Системы хранения данных</a></h2>
<ol>
<li><strong>PostgreSQL</strong> - основные данные: пользователи, тренировки, история занятий</li>
<li><strong>Redis</strong> - кэш, сессии, временные данные, очереди задач</li>
</ol>
<h2 id="Внешние-интеграции"><a class="header" href="#Внешние-интеграции">Внешние интеграции</a></h2>
<ol>
<li><strong>IoT-устройства</strong> - сбор показателей состояния пользователя</li>
<li><strong>Google Calendar</strong> - синхронизация расписания тренировок</li>
</ol>
<iframe class="drawio-viewer" src="https://viewer.diagrams.net/?highlight=0000ff&edit=_blank&layers=1&nav=1&title=diagram&url=https://raw.githubusercontent.com/Kataiii/system-engineering-playbook/main/src/diagrams/architecture.drawio"></iframe>
<div style="break-before: page; page-break-before: always;"></div><p><a href="https://docs.google.com/document/d/1NnZB57I-WnOwblDwLx0j21prRAXQAPoZ6eFcLpOHcyk/edit?usp=sharing">Ссылка на документ</a></p>
<h1 id="adr-flutter"><a class="header" href="#adr-flutter">ADR Flutter</a></h1>
<h1 id="adr-Выбор-dart-и-flutter-с-движком-рендеринга-impeller-для-разработки-мобильного-приложения"><a class="header" href="#adr-Выбор-dart-и-flutter-с-движком-рендеринга-impeller-для-разработки-мобильного-приложения"><strong>ADR: Выбор Dart и Flutter с движком рендеринга Impeller для разработки мобильного приложения</strong></a></h1>
<h2 id="Контекст"><a class="header" href="#Контекст"><strong>Контекст</strong></a></h2>
<p>Требуется разработать кроссплатформенное мобильное приложение для iOS и Android со следующими характеристиками:</p>
<ul>
<li>Обязательное требование: Единая кодовая база для всех платформ</li>
<li>Обязательное требование: Идентичный интерфейс и пользовательский опыт на iOS и Android</li>
<li>Срок выхода на рынок: 6 месяцев</li>
<li>Целевая аудитория: 50K+ пользователей</li>
<li>Требования к производительности: стабильный UI 60fps без шейдерных дропов</li>
<li>Бюджет: ограниченный</li>
</ul>
<h2 id="Ключевые-требования-из-ТЗ"><a class="header" href="#Ключевые-требования-из-ТЗ"><strong>Ключевые требования из ТЗ</strong></a></h2>
<ol>
<li>Единая кодовая база - один код для iOS и Android</li>
<li>Идентичный интерфейс - одинаковый UI и UX на всех платформах</li>
<li>Консистентность бренда - точное соблюдение дизайн-системы</li>
<li>Синхронные обновления - одновременный релиз фич на всех платформах</li>
</ol>
<h2 id="Рассмотренные-варианты"><a class="header" href="#Рассмотренные-варианты"><strong>Рассмотренные варианты</strong></a></h2>
<h3 id="Вариант-1-Нативная-разработка-swiftkotlin"><a class="header" href="#Вариант-1-Нативная-разработка-swiftkotlin"><strong>Вариант 1: Нативная разработка (Swift/Kotlin)</strong></a></h3>
<p>Плюсы:</p>
<ul>
<li>Максимальная производительность</li>
<li>Прямой доступ к нативным API</li>
<li>Стабильность и зрелость экосистем</li>
</ul>
<p>Минусы:</p>
<ul>
<li>❌ Две отдельные codebase - нарушение ключевого требования</li>
<li>❌ Разный UI - нативные компоненты iOS/Android отличаются визуально</li>
<li>Удвоенные затраты на разработку</li>
<li>Сложность синхронизации фич между платформами</li>
<li>Различное поведение жестов и анимаций</li>
</ul>
<h3 id="Вариант-2-react-native"><a class="header" href="#Вариант-2-react-native"><strong>Вариант 2: React Native</strong></a></h3>
<p>Плюсы:</p>
<ul>
<li>Широкая популярность и сообщество</li>
<li>Использование JavaScript/TypeScript</li>
<li>Большое количество готовых библиотек</li>
</ul>
<p>Минусы:</p>
<ul>
<li>⚠️ Частично единая codebase - требует нативных модулей</li>
<li>⚠️ Визуальные различия - компоненты могут выглядеть по-разному</li>
<li>Мост между нативным и JS кодом создает bottleneck</li>
<li>Проблемы с компиляцией шейдеров в рантайме</li>
<li>Задержки при сложных анимациях</li>
</ul>
<h3 id="Вариант-3-flutter-с-impeller-dart"><a class="header" href="#Вариант-3-flutter-с-impeller-dart"><strong>Вариант 3: Flutter с Impeller (Dart)</strong></a></h3>
<p>Плюсы:</p>
<ul>
<li>✅ Полностью единая codebase для обеих платформ</li>
<li>✅ Абсолютно идентичный UI - пиксель в пиксель совпадение</li>
<li>Предсказуемая производительность с предкомпиляцией шейдеров</li>
<li>Современный движок рендеринга, оптимизированный для мобильных устройств</li>
</ul>
<p>Минусы:</p>
<ul>
<li>Относительно новый движок рендеринга</li>
<li>Требует Flutter 3.10+ для полной функциональности</li>
</ul>
<h2 id="Решение"><a class="header" href="#Решение"><strong>Решение</strong></a></h2>
<p>Выбран Вариант 3: Flutter с языком Dart и движком рендеринга Impeller</p>
<h3 id="Обоснование-соответствия-требованиям-ТЗ"><a class="header" href="#Обоснование-соответствия-требованиям-ТЗ"><strong>Обоснование соответствия требованиям ТЗ</strong></a></h3>
<h4 id="1-Единая-кодовая-база---100-выполнение"><a class="header" href="#1-Единая-кодовая-база---100-выполнение"><strong>1. Единая кодовая база - 100% выполнение</strong></a></h4>
<p>Реализация требования:</p>
<ul>
<li>Один репозиторий кода</li>
<li>Один процесс разработки</li>
<li>Один pipeline CI/CD</li>
<li>Исключение дублирования логики</li>
</ul>
<h4 id="2-Идентичный-интерфейс---гарантированное-визуальное-соответствие"><a class="header" href="#2-Идентичный-интерфейс---гарантированное-визуальное-соответствие"><strong>2. Идентичный интерфейс - гарантированное визуальное соответствие</strong></a></h4>
<p>Преимущества для консистентности:</p>
<ul>
<li>✅ Точное соблюдение дизайн-системы</li>
<li>✅ Идентичные анимации и transitions</li>
<li>✅ Одинаковые жесты и интерактивность</li>
<li>✅ Совпадение pixel-perfect макетов</li>
</ul>
<h4 id="3-Сравнение-выполнения-требований-ТЗ"><a class="header" href="#3-Сравнение-выполнения-требований-ТЗ"><strong>3. Сравнение выполнения требований ТЗ</strong></a></h4>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Требование ТЗ</th><th style="text-align: left">Нативный</th><th style="text-align: left">React Native</th><th style="text-align: left">Flutter + Impeller</th></tr></thead><tbody>
<tr><td style="text-align: left">Единая кодовая база</td><td style="text-align: left">❌ Не выполняется</td><td style="text-align: left">⚠️ Частично</td><td style="text-align: left">✅ Полностью</td></tr>
<tr><td style="text-align: left">Идентичный интерфейс</td><td style="text-align: left">❌ Не выполняется</td><td style="text-align: left">⚠️ Частично</td><td style="text-align: left">✅ Полностью</td></tr>
<tr><td style="text-align: left">Консистентность бренда</td><td style="text-align: left">❌ Сложно</td><td style="text-align: left">⚠️ Возможно</td><td style="text-align: left">✅ Гарантировано</td></tr>
<tr><td style="text-align: left">Синхронные обновления</td><td style="text-align: left">❌ Сложно</td><td style="text-align: left">⚠️ Возможно</td><td style="text-align: left">✅ Автоматически</td></tr>
</tbody></table>
</div>
<h4 id="4-Экономическая-эффективность-при-выполнении-ТЗ"><a class="header" href="#4-Экономическая-эффективность-при-выполнении-ТЗ"><strong>4. Экономическая эффективность при выполнении ТЗ</strong></a></h4>
<p><code>Оценка выполнения требований ТЗ:</code><br />
<code>- Нативная разработка: 24 человеко-месяца + постоянная синхронизация UI</code><br />
<code>- React Native: 14 человеко-месяцев + доработка консистентности</code><br />
<code>- Flutter + Impeller: 12 человеко-месяцев (автоматическая консистентность)</code></p>
<h2 id="Последствия"><a class="header" href="#Последствия"><strong>Последствия</strong></a></h2>
<h3 id="Положительные"><a class="header" href="#Положительные"><strong>Положительные</strong></a></h3>
<ul>
<li>✅ 100% выполнение требований ТЗ по единой codebase и идентичному UI</li>
<li>Стабильная производительность с Impeller - отсутствие шейдерных компиляций</li>
<li>Автоматическая консистентность - визуальная идентичность гарантирована архитектурой</li>
<li>Сокращение времени разработки на 40%</li>
<li>Экономия бюджета на разработку ~$120K</li>
<li>Future-proof архитектура - Impeller как стратегическое направление Flutter</li>
</ul>
<h3 id="Отрицательные"><a class="header" href="#Отрицательные"><strong>Отрицательные</strong></a></h3>
<ul>
<li>Отказ от нативных паттернов - одинаковый UI может отличаться от ожиданий пользователей конкретной платформы</li>
<li>Ограниченная обратная совместимость: Требует Flutter 3.10+</li>
<li>Меньше документации по Impeller compared to Skia</li>
</ul>
<h3 id="Риски-и-митигация"><a class="header" href="#Риски-и-митигация"><strong>Риски и митигация</strong></a></h3>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Риск</th><th style="text-align: left">Вероятность</th><th style="text-align: left">Влияние</th><th style="text-align: left">Митигация</th></tr></thead><tbody>
<tr><td style="text-align: left">Единый UI не соответствует ожиданиям пользователей</td><td style="text-align: left">Средняя</td><td style="text-align: left">Среднее</td><td style="text-align: left">UX исследования, опциональная адаптация под платформу</td></tr>
<tr><td style="text-align: left">Регрессии в Impeller</td><td style="text-align: left">Средняя</td><td style="text-align: left">Высокое</td><td style="text-align: left">Тестирование на реальных устройствах, fallback на Skia</td></tr>
<tr><td style="text-align: left">Ограниченная функциональность</td><td style="text-align: left">Низкая</td><td style="text-align: left">Среднее</td><td style="text-align: left">Мониторинг обновлений Impeller</td></tr>
</tbody></table>
</div>
<h2 id="Заключение"><a class="header" href="#Заключение"><strong>Заключение</strong></a></h2>
<p>Flutter с Impeller является оптимальным выбором, полностью соответствующим всем требованиям ТЗ:</p>
<ol>
<li>✅ Единая кодовая база - один код для iOS и Android</li>
<li>✅ Идентичный интерфейс - pixel-perfect совпадение на всех платформах</li>
<li>✅ Консистентность бренда - точное соблюдение дизайн-системы</li>
<li>✅ Синхронные обновления - одновременный релиз на всех платформах</li>
</ol>
<p>Дополнительные преимущества:</p>
<ul>
<li>Стабильная производительность с предкомпиляцией шейдеров Impeller</li>
<li>Экономическая эффективность разработки</li>
</ul>
<p>Данное решение не только соответствует текущим требованиям ТЗ, но и создает основу для масштабирования на другие платформы (web, desktop) с сохранением полной консистентности кодовой базы и пользовательского интерфейса.</p>
<h1 id="adr-МП"><a class="header" href="#adr-МП">ADR МП</a></h1>
<h3 id="adr-Архитектура-приложения--clean-architecture-Контекст-Требуется-создать-сложное-мобильное-приложение-с-четким-разделением-ответственности-высокой-тестируемостью-независимостью-от-фреймворков-и-ui-а-также-поддержкой-нескольких-источников-данных-локальная-БД-ИИ-внешние-api-Приложение-должно-быть-легко-масштабируемым-и-поддерживаемым-в-долгосрочной-перспективе"><a class="header" href="#adr-Архитектура-приложения--clean-architecture-Контекст-Требуется-создать-сложное-мобильное-приложение-с-четким-разделением-ответственности-высокой-тестируемостью-независимостью-от-фреймворков-и-ui-а-также-поддержкой-нескольких-источников-данных-локальная-БД-ИИ-внешние-api-Приложение-должно-быть-легко-масштабируемым-и-поддерживаемым-в-долгосрочной-перспективе"><strong>ADR: Архитектура приложения — Clean Architecture</strong> Контекст: Требуется создать сложное мобильное приложение с четким разделением ответственности, высокой тестируемостью, независимостью от фреймворков и UI, а также поддержкой нескольких источников данных (локальная БД, ИИ, внешние API). Приложение должно быть легко масштабируемым и поддерживаемым в долгосрочной перспективе.</a></h3>
<p>Решение: Использовать Clean Architecture. Структура проекта будет разделена на три основных слоя:</p>
<ol>
<li>Presentation Layer (Слой представления): Содержит виджеты, страницы и логику состояния (BLoC). Зависит от Domain Layer.</li>
<li>Domain Layer (Доменный слой): Содержит бизнес-логику, Use Cases (Интеракторы), Entities (Бизнес-сущности) и интерфейсы репозиториев. Это ядро приложения, которое не зависит ни от каких внешних фреймворков.</li>
<li>Data Layer (Слой данных): Содержит реализацию репозиториев, модели данных (Data Transfer Objects - DTOs), источники данных (локальная БД, сетевые API). Зависит от Domain Layer.</li>
</ol>
<p>Последствия:</p>
<ul>
<li>Плюсы:
<ul>
<li>Тестируемость: Бизнес-логика (Use Cases) и логика состояния (BLoC) могут быть легко протестированы с помощью модульных тестов, так как не зависят от конкретных реализаций UI, БД или сети.</li>
<li>Слабая связанность: Изменения в одном слое (например, замена Hive на другую БД) минимально затрагивают другие слои.</li>
<li>Сопровождаемость: Четкое разделение кода облегчает его понимание и модификацию, что соответствует требованию поддержки и обслуживания.</li>
<li>Масштабируемость: Новые функции (например, интеграция с новым фитнес-сервисом) легко добавляются в виде новых Use Cases и репозиториев.</li>
</ul>
</li>
<li>Минусы:
<ul>
<li>Бойлерплейт: Требуется писать больше кода для организации слоев и преобразования моделей между ними.</li>
<li>Сложность изучения: Для новых разработчиков может показаться избыточно сложной по сравнению с MVC или простым StatefulWidget.</li>
</ul>
</li>
</ul>
<h3 id="adr-Управление-состоянием--bloc-Контекст-Приложение-имеет-сложное-состояние-асинхронная-загрузка-данных-от-ИИ-пошаговый-процесс-тренировки-с-таймерами-множественные-экраны-с-фильтрами-и-поиском-Необходимо-централизованно-управлять-состоянием-обеспечивать-предсказуемость-его-изменений-и-легко-тестировать-логику"><a class="header" href="#adr-Управление-состоянием--bloc-Контекст-Приложение-имеет-сложное-состояние-асинхронная-загрузка-данных-от-ИИ-пошаговый-процесс-тренировки-с-таймерами-множественные-экраны-с-фильтрами-и-поиском-Необходимо-централизованно-управлять-состоянием-обеспечивать-предсказуемость-его-изменений-и-легко-тестировать-логику"><strong>ADR: Управление состоянием — BLoC</strong> Контекст: Приложение имеет сложное состояние: асинхронная загрузка данных от ИИ, пошаговый процесс тренировки с таймерами, множественные экраны с фильтрами и поиском. Необходимо централизованно управлять состоянием, обеспечивать предсказуемость его изменений и легко тестировать логику.</a></h3>
<p>Решение: Использовать библиотеку BLoC (Business Logic Component). BLoC будет выступать в качестве прослойки между Domain Layer (Use Cases) и Presentation Layer.</p>
<p>Последствия:</p>
<ul>
<li>Плюсы:
<ul>
<li>Предсказуемость: Односторонний поток данных (Events -&gt; Bloc -&gt; State) делает отладку и отслеживание изменений состояния простым.</li>
<li>Мощная экосистема: Интеграция с <code>bloc_test</code> для простого тестирования, <code>flutter_bloc</code> для удобной работы с виджетами.</li>
<li>Отличное разделение логики и UI: BLoC изолирует бизнес-логику, что идеально сочетается с Clean Architecture. UI просто отображает состояние и отправляет события.</li>
<li>Поддержка сложных сценариев: Отлично подходит для обработки асинхронных операций (генерация ИИ, таймеры тренировки), что критично для нашего приложения.</li>
</ul>
</li>
<li>Минусы:
<ul>
<li>Кривая обучения: Требует понимания концепций Streams, Rx.</li>
<li>Бойлерплейт: Необходимо создавать классы для Events, States и самих Blocs даже для простых операций.</li>
</ul>
</li>
</ul>
<h3 id="adr-Внедрение-зависимостей--injectable--get-it-Контекст-В-clean-architecture-с-множеством-слоев-и-зависимостей-репозитории-use-cases-внешние-сервисы-необходим-эффективный-и-безопасный-способ-представления-этих-зависимостей-классам-которые-в-них-нуждаются-например-bloc-ам"><a class="header" href="#adr-Внедрение-зависимостей--injectable--get-it-Контекст-В-clean-architecture-с-множеством-слоев-и-зависимостей-репозитории-use-cases-внешние-сервисы-необходим-эффективный-и-безопасный-способ-представления-этих-зависимостей-классам-которые-в-них-нуждаются-например-bloc-ам"><strong>ADR: Внедрение зависимостей — Injectable + Get It</strong> Контекст: В Clean Architecture с множеством слоев и зависимостей (репозитории, use cases, внешние сервисы) необходим эффективный и безопасный способ представления этих зависимостей классам, которые в них нуждаются (например, BLoC-ам).</a></h3>
<p>Решение: Использовать комбинацию injectable (генератор кода на основе аннотаций) и get_it (контейнер служб). Это позволит автоматически генерировать код для регистрации и разрешения зависимостей.</p>
<p>Последствия:</p>
<ul>
<li>Плюсы:
<ul>
<li>Минимум ручного кода: <code>injectable</code> генерирует код регистрации зависимостей, что уменьшает количество ошибок и бойлерплейта.</li>
<li>Типобезопасность: <code>get_it</code> обеспечивает типобезопасное получение зависимостей.</li>
<li>Простота тестирования: Позволяет легко подменять реальные реализации на Mock-объекты во время тестов.</li>
<li>Чистота архитектуры: Помогает соблюдать принцип Dependency Inversion, объявляя зависимости в Domain Layer через абстракции (интерфейсы), а реализацию предоставляя в Data Layer.</li>
</ul>
</li>
<li>Минусы:
<ul>
<li>Зависимость от кодогенерации: Требует периодического запуска <code>build_runner</code>.</li>
<li>Неочевидно откуда и как берутся зависимости.</li>
</ul>
</li>
</ul>
<h3 id="adr-Локальная-база-данных--hive-Контекст-Приложению-необходимо-хранить-большое-количество-структурированных-данных-локально-профиль-пользователя-шаблоны-тренировок-историю-выполненных-тренировок-упражнения-Требуется-высокая-производительность-для-операций-чтениязаписи-особенно-во-время-активной-тренировки-Критически-важен-оффлайн-режим"><a class="header" href="#adr-Локальная-база-данных--hive-Контекст-Приложению-необходимо-хранить-большое-количество-структурированных-данных-локально-профиль-пользователя-шаблоны-тренировок-историю-выполненных-тренировок-упражнения-Требуется-высокая-производительность-для-операций-чтениязаписи-особенно-во-время-активной-тренировки-Критически-важен-оффлайн-режим"><strong>ADR: Локальная база данных — Hive</strong> Контекст: Приложению необходимо хранить большое количество структурированных данных локально: профиль пользователя, шаблоны тренировок, историю выполненных тренировок, упражнения. Требуется высокая производительность для операций чтения/записи, особенно во время активной тренировки. Критически важен оффлайн-режим.</a></h3>
<p>Решение: Использовать Hive как основное решение для локального хранения данных. Это NoSQL-база данных, написанная на Dart, очень быстрая и не требующая ORM.</p>
<p>Последствия:</p>
<ul>
<li>Плюсы:
<ul>
<li>Высокая производительность: Значительно быстрее SQLite, так как не использует SQL-запросы и ORM.</li>
<li>Простота использования: Не требует описания схемы на SQL, работа ведется с нативными Dart-объектами (после их адаптации с помощью <code>TypeAdapter</code>).</li>
<li>Кросс-платформенность: Работает на всех платформах Flutter.</li>
<li>Идеально для оффлайн-режима: Быстрый доступ к данным удовлетворяет требованию работы без интернета.</li>
</ul>
</li>
<li>Минусы:
<ul>
<li>Отсутствие схемы и сложных запросов: Не подходит для данных, требующих сложных JOIN-запросов. Однако для структуры данных приложения (тренировки, упражнения) это не является проблемой.</li>
</ul>
</li>
</ul>
<h3 id="adr-Шифрование-локальных-данных--flutter-secure-storage-Контекст-Согласно-нефункциональному-требованию-Безопасность-необходимо-обеспечить-шифрование-локально-хранимых-пользовательских-данных-Пнд-Обычные-boxes-hive-не-шифруются-по-умолчанию"><a class="header" href="#adr-Шифрование-локальных-данных--flutter-secure-storage-Контекст-Согласно-нефункциональному-требованию-Безопасность-необходимо-обеспечить-шифрование-локально-хранимых-пользовательских-данных-Пнд-Обычные-boxes-hive-не-шифруются-по-умолчанию"><strong>ADR: Шифрование локальных данных — Flutter Secure Storage</strong> Контекст: Согласно нефункциональному требованию "Безопасность", необходимо обеспечить шифрование локально хранимых пользовательских данных (Пн.д.). Обычные Boxes Hive не шифруются по умолчанию.</a></h3>
<p>Решение: Использовать пакет flutter_secure_storage для хранения мастер-ключа от зашифрованного Hive-бокса. Это позволит создать зашифрованное хранилище для конфиденциальных данных пользователя.</p>
<p>Последствия:</p>
<ul>
<li>Плюсы:
<ul>
<li>Безопасность: Ключи хранятся в защищенных хранилищах платформ (Keychain для iOS, Keystore для Android).</li>
<li>Соответствие требованиям: Позволяет выполнить требование по шифрованию Пн.д.</li>
<li>Интеграция с Hive: Hive предоставляет возможность использовать зашифрованные боксы, инициализируемые с помощью ключа из Secure Storage.</li>
</ul>
</li>
<li>Минусы:
<ul>
<li>Дополнительная сложность: Необходимо управлять процессом инициализации зашифрованного бокса при запуске приложения.</li>
</ul>
</li>
</ul>
<h3 id="adr-Локальные-уведомления--flutter-local-notifications-Контекст-Требуется-отправлять-push-уведомления-даже-когда-приложение-закрыто-например-для-мотивационных-сообщений-напоминаний-о-тренировках-или-уведомления-о-завершении-таймера-отдыха-сценарий-Пользователь-забыл-завершить-тренировку"><a class="header" href="#adr-Локальные-уведомления--flutter-local-notifications-Контекст-Требуется-отправлять-push-уведомления-даже-когда-приложение-закрыто-например-для-мотивационных-сообщений-напоминаний-о-тренировках-или-уведомления-о-завершении-таймера-отдыха-сценарий-Пользователь-забыл-завершить-тренировку"><strong>ADR: Локальные уведомления — Flutter Local Notifications</strong> Контекст: Требуется отправлять push-уведомления даже когда приложение закрыто, например, для мотивационных сообщений, напоминаний о тренировках или уведомления о завершении таймера отдыха (сценарий "Пользователь забыл завершить тренировку").</a></h3>
<p>Решение: Использовать пакет flutter_local_notifications. Он предоставляет богатый функционал для отображения локальных уведомлений на iOS и Android.</p>
<p>Последствия:</p>
<ul>
<li>Плюсы:
<ul>
<li>Контроль: Уведомления планируются и показываются самим приложением, без необходимости в серверной части.</li>
<li>Гибкость: Позволяет создавать уведомления с действиями (actions), что полезно для быстрых ответов.</li>
<li>Оффлайн-работа: Полностью работает без интернета.</li>
</ul>
</li>
<li>Минусы:
<ul>
<li>Платформенная специфика: Требует настройки разрешений и каналов уведомлений для каждой платформы.</li>
</ul>
</li>
</ul>
<h3 id="adr-Живые-активности--live-activities--activitykit-Контекст-В-сценарии-Процесс-тренировки-требуется-отображать-нескрываемый-action-push-с-прогрессом-выполнения-упражнения-На-ios-начиная-с-версии-161-для-этого-идеально-подходят-live-activities"><a class="header" href="#adr-Живые-активности--live-activities--activitykit-Контекст-В-сценарии-Процесс-тренировки-требуется-отображать-нескрываемый-action-push-с-прогрессом-выполнения-упражнения-На-ios-начиная-с-версии-161-для-этого-идеально-подходят-live-activities"><strong>ADR: "Живые" активности — Live Activities / ActivityKit</strong> Контекст: В сценарии "Процесс тренировки" требуется отображать "нескрываемый action-push с прогрессом выполнения упражнения". На iOS, начиная с версии 16.1, для этого идеально подходят Live Activities.</a></h3>
<p>Решение: Использовать пакет live_activities (или написать нативный плагин) для интеграции с iOS ActivityKit. Это позволит выводить информацию о текущей тренировке на экран блокировки и в " Dynamic Island".</p>
<p>Последствия:</p>
<ul>
<li>Плюсы:
<ul>
<li>Инновационный UI: Предоставляет пользователю лучший в своем классе опыт, соответствуя современным тенденциям iOS.</li>
<li>Постоянная видимость: Ключевая информация о тренировке всегда под рукой, не занимая место в основном интерфейсе.</li>
</ul>
</li>
<li>Минусы:
<ul>
<li>Только для iOS 16.1+: Охват пользователей ограничен. Для Android и старых версий iOS потребуется альтернативная реализация (например, постоянное уведомление).</li>
<li>Сложность реализации: Требует глубокого понимания нативных возможностей iOS и Swift.</li>
</ul>
</li>
</ul>
<h3 id="adr-Локальный-ИИ--google-ml-kit-Контекст-ИИ-тренер-должен-генерировать-тренировки-и-давать-рекомендации-Для-обеспечения-конфиденциальности-данных-скорости-работы-и-оффлайн-функциональности-критически-важно-выполнять-часть-вычислений-на-устройстве"><a class="header" href="#adr-Локальный-ИИ--google-ml-kit-Контекст-ИИ-тренер-должен-генерировать-тренировки-и-давать-рекомендации-Для-обеспечения-конфиденциальности-данных-скорости-работы-и-оффлайн-функциональности-критически-важно-выполнять-часть-вычислений-на-устройстве"><strong>ADR: Локальный ИИ — Google ML Kit</strong> Контекст: ИИ-тренер должен генерировать тренировки и давать рекомендации. Для обеспечения конфиденциальности данных, скорости работы и оффлайн-функциональности критически важно выполнять часть вычислений на устройстве.</a></h3>
<p>Решение: Использовать Google ML Kit. В частности, его возможности для Natural Language Processing (NLP) (например, для анализа целей пользователя, если они вводятся текстом) и Custom Models. Мы можем обучить собственную модель для рекомендаций упражнений и развернуть ее на устройстве с помощью ML Kit.</p>
<p>Последствия:</p>
<ul>
<li>Плюсы:
<ul>
<li>Конфиденциальность: Данные пользователя не покидают его устройство.</li>
<li>Оффлайн-работа: ИИ функциональность доступна без интернета.</li>
<li>Производительность: Быстрый отклик, нет задержек на сетевой запрос.</li>
<li>Кросс-платформенность: Работает на iOS и Android.</li>
</ul>
</li>
<li>Минусы:
<ul>
<li>Ограниченная мощность: Модели на устройстве обычно менее мощные, чем большие серверные модели (как GPT). Требуется тщательное проектирование и обучение модели для достижения качественных результатов.</li>
<li>Размер приложения: Включение моделей может увеличить размер APK/IPA.</li>
</ul>
</li>
</ul>
<h3 id="adr-Связь-со-смарт-часами--watch-connectivity--flutter-wear-plugin-Контекст-Для-расширения-пользовательского-опыта-и-сбора-более-точных-данных-пульс-желательна-интеграция-со-смарт-часами-Это-позволит-управлять-тренировкой-и-видеть-прогресс-прямо-на-запястье"><a class="header" href="#adr-Связь-со-смарт-часами--watch-connectivity--flutter-wear-plugin-Контекст-Для-расширения-пользовательского-опыта-и-сбора-более-точных-данных-пульс-желательна-интеграция-со-смарт-часами-Это-позволит-управлять-тренировкой-и-видеть-прогресс-прямо-на-запястье"><strong>ADR: Связь со смарт-часами — Watch Connectivity / Flutter Wear Plugin</strong> Контекст: Для расширения пользовательского опыта и сбора более точных данных (пульс) желательна интеграция со смарт-часами. Это позволит управлять тренировкой и видеть прогресс прямо на запястье.</a></h3>
<p>Решение: Использовать нативные API (WatchConnectivity для iOS, Wear OS APIs для Android) через кастомный плагин или готовые решения, такие как flutter_apple_watch или wear.</p>
<p>Последствия:</p>
<ul>
<li>Плюсы:
<ul>
<li>Улучшенный UX: Пользователи могут оставить телефон в стороне и управлять тренировкой с часов.</li>
<li>Дополнительные данные: Интеграция с датчиками часов (пульс) для более точного анализа нагрузки и рекомендаций по отдыху.</li>
</ul>
</li>
<li>Минусы:
<ul>
<li>Высокая сложность: Требуется разработка и поддержка двух отдельных приложений/интерфейсов (для телефона и для часов).</li>
<li>Фрагментация: Необходимо учитывать различия между WatchOS и Wear OS.</li>
</ul>
</li>
</ul>
<h3 id="adr-Проверка-подключения-к-интернету--connectivity-plus-Контекст-Приложению-необходимо-определять-состояние-сетевого-подключения-для-включенияотключения-определенных-функций-например-синхронизация-с-календарем-обновление-облачной-аналитики-и-для-информирования-пользователя"><a class="header" href="#adr-Проверка-подключения-к-интернету--connectivity-plus-Контекст-Приложению-необходимо-определять-состояние-сетевого-подключения-для-включенияотключения-определенных-функций-например-синхронизация-с-календарем-обновление-облачной-аналитики-и-для-информирования-пользователя"><strong>ADR: Проверка подключения к интернету — Connectivity Plus</strong> Контекст: Приложению необходимо определять состояние сетевого подключения для включения/отключения определенных функций (например, синхронизация с календарем, обновление облачной аналитики) и для информирования пользователя.</a></h3>
<p>Решение: Использовать пакет connectivity_plus. Он предоставляет простой API для проверки типа подключения (Wi-Fi, мобильное) и его наличия.</p>
<p>Последствия:</p>
<ul>
<li>Плюсы:
<ul>
<li>Простота использования: Легко интегрируется в BLoC для реакции на изменение состояния сети.</li>
<li>Кросс-платформенность.</li>
</ul>
</li>
<li>Минусы:
<ul>
<li>Ограниченность: Проверяет только наличие подключения, но не факт наличия интернета (устройство может быть в Wi-Fi без доступа в сеть). Для точной проверки может потребоваться дополнительный ping-запрос.</li>
</ul>
</li>
</ul>
<h3 id="adr-Сетевые-запросы--retrofit--dio-Контекст-Для-взаимодействия-с-внешними-api-например-для-синхронизации-с-google-calendar-отправки-аналитики-на-сервер-потенциально-для-облачной-версии-ИИ-необходим-мощный-и-удобный-http-клиент"><a class="header" href="#adr-Сетевые-запросы--retrofit--dio-Контекст-Для-взаимодействия-с-внешними-api-например-для-синхронизации-с-google-calendar-отправки-аналитики-на-сервер-потенциально-для-облачной-версии-ИИ-необходим-мощный-и-удобный-http-клиент"><strong>ADR: Сетевые запросы — Retrofit + Dio</strong> Контекст: Для взаимодействия с внешними API (например, для синхронизации с Google Calendar, отправки аналитики на сервер, потенциально для облачной версии ИИ) необходим мощный и удобный HTTP-клиент.</a></h3>
<p>Решение: Использовать комбинацию Dio (как HTTP-клиент) и Retrofit (как генератор кода для API-клиентов). Retrofit позволит описать API в виде аннотированного Dart-интерфейса, что сделает сетевой слой чистым и типобезопасным.</p>
<p>Последствия:</p>
<ul>
<li>Плюсы:
<ul>
<li>Минимум бойлерплейта: Retrofit генерирует весь код для сетевых вызовов.</li>
<li>Типобезопасность: Ошибки в путях запросов или телах ловятся на этапе компиляции.</li>
<li>Мощность Dio: Перехватчики (interceptors) для логирования, кеширования, автоматических повторов запросов, что упрощает обработку ошибок и соответствует требованию по аналитике сбоев.</li>
</ul>
</li>
<li>Минусы:
<ul>
<li>Зависимость от кодогенерации.</li>
</ul>
</li>
</ul>
<h1 id="adr-nestjs"><a class="header" href="#adr-nestjs">ADR NestJS</a></h1>
<h1 id="adr-Выбор-nestjs-для-разработки-backend-мобильного-приложения-дневника-тренировок-с-ИИ-тренером"><a class="header" href="#adr-Выбор-nestjs-для-разработки-backend-мобильного-приложения-дневника-тренировок-с-ИИ-тренером"><strong>ADR: Выбор NestJS для разработки backend мобильного приложения-дневника тренировок с ИИ-тренером</strong></a></h1>
<h2 id="Контекст-1"><a class="header" href="#Контекст-1"><strong>Контекст</strong></a></h2>
<p>Согласно ТЗ требуется разработать backend для мобильного приложения-дневника тренировок с ИИ-тренером. Основные требования из ТЗ:</p>
<p>Функциональные требования:</p>
<ul>
<li>Управление тренировочными процессами и программами</li>
<li>Интеграция с ИИ-тренером для генерации тренировок</li>
<li>Синхронизация данных между устройствами</li>
<li>Управление пользовательскими профилями и данными</li>
<li>Обработка оффлайн-данных при синхронизации</li>
<li>Интеграция с календарями (Google Calendar, системные календари)</li>
</ul>
<p>Нефункциональные требования из ТЗ:</p>
<ul>
<li>Безопасность: шифрование данных, соответствие 152-ФЗ</li>
<li>Поддержка оффлайн-режима с последующей синхронизацией</li>
<li>Надежность: не более 1 критической ошибки на 1000 сессий</li>
<li>Совместимость с iOS 14+, Android 10+, HarmonyOS</li>
<li>Возможность удаленного обновления контента</li>
</ul>
<h2 id="Рассмотренные-варианты-1"><a class="header" href="#Рассмотренные-варианты-1"><strong>Рассмотренные варианты</strong></a></h2>
<h3 id="Вариант-1-django-python"><a class="header" href="#Вариант-1-django-python"><strong>Вариант 1: Django (Python)</strong></a></h3>
<p>Плюсы:</p>
<ul>
<li>Богатая экосистема для ML (ИИ-тренер)</li>
<li>Встроенная админ-панель</li>
<li>ORM из коробки</li>
<li>Зрелое сообщество</li>
</ul>
<p>Минусы:</p>
<ul>
<li>Менее производительный в I/O операциях</li>
<li>Сложности с real-time функциями</li>
<li>Больший расход памяти</li>
</ul>
<h3 id="Вариант-2-spring-boot-javakotlin"><a class="header" href="#Вариант-2-spring-boot-javakotlin"><strong>Вариант 2: Spring Boot (Java/Kotlin)</strong></a></h3>
<p>Плюсы:</p>
<ul>
<li>Высокая производительность</li>
<li>Отличная поддержка многопоточности</li>
<li>Богатая экосистема enterprise-уровня</li>
<li>Сильная типизация</li>
</ul>
<p>Минусы:</p>
<ul>
<li>Более высокая сложность разработки</li>
<li>Больший overhead для простых CRUD операций</li>
<li>Менее гибкий для быстрого прототипирования</li>
</ul>
<h3 id="Вариант-3-nestjs-nodejstypescript"><a class="header" href="#Вариант-3-nestjs-nodejstypescript"><strong>Вариант 3: NestJS (Node.js/TypeScript)</strong></a></h3>
<p>Плюсы:</p>
<ul>
<li>Высокая производительность I/O операций</li>
<li>Полная поддержка TypeScript</li>
<li>Модульная архитектура из коробки</li>
<li>Отличная поддержка WebSockets для real-time функций</li>
<li>Легкая интеграция с существующими npm пакетами</li>
</ul>
<p>Минусы:</p>
<ul>
<li>Меньше встроенных возможностей для ML</li>
<li>Требует дополнительной настройки для сложных транзакций</li>
</ul>
<h2 id="Решение-1"><a class="header" href="#Решение-1"><strong>Решение</strong></a></h2>
<p>Выбран Вариант 3: NestJS</p>
<h3 id="Обоснование-выбора"><a class="header" href="#Обоснование-выбора"><strong>Обоснование выбора</strong></a></h3>
<h4 id="1-Соответствие-архитектурным-требованиям-ТЗ"><a class="header" href="#1-Соответствие-архитектурным-требованиям-ТЗ"><strong>1. Соответствие архитектурным требованиям ТЗ</strong></a></h4>
<p>Преимущества для реализации ТЗ:</p>
<ul>
<li>Четкое разделение ответственности между модулями</li>
<li>Легкое тестирование отдельных компонентов</li>
<li>Простота масштабирования и добавления новых функций</li>
</ul>
<h4 id="2-Поддержка-typescript-для-надежной-разработки"><a class="header" href="#2-Поддержка-typescript-для-надежной-разработки"><strong>2. Поддержка TypeScript для надежной разработки</strong></a></h4>
<h4 id="3-Производительность-для-мобильных-клиентов"><a class="header" href="#3-Производительность-для-мобильных-клиентов"><strong>3. Производительность для мобильных клиентов</strong></a></h4>
<p>Оптимизированные эндпоинты для мобильных устройств (кеширование, обработка офлайн-данных)</p>
<h4 id="4-Безопасность-и-соответствие-152-ФЗ"><a class="header" href="#4-Безопасность-и-соответствие-152-ФЗ"><strong>4. Безопасность и соответствие 152-ФЗ</strong></a></h4>
<p>Встроенная поддержка аутентификации и авторизации, Шифрование чувствительных данных и валидация данных</p>
<h4 id="5-Интеграция-с-ИИ-тренером"><a class="header" href="#5-Интеграция-с-ИИ-тренером"><strong>5. Интеграция с ИИ-тренером</strong></a></h4>
<h4 id="6-Оффлайн-синхронизация"><a class="header" href="#6-Оффлайн-синхронизация"><strong>6. Оффлайн-синхронизация</strong></a></h4>
<h2 id="Последствия-1"><a class="header" href="#Последствия-1"><strong>Последствия</strong></a></h2>
<h3 id="Положительные-1"><a class="header" href="#Положительные-1"><strong>Положительные</strong></a></h3>
<ul>
<li>Высокая производительность I/O - критично для мобильных клиентов</li>
<li>Система типов TypeScript - снижение ошибок в сложной бизнес-логике</li>
<li>Модульность - соответствует доменной модели из ТЗ</li>
<li>Быстрая разработка - ускорение time-to-market</li>
<li>Легкая интеграция с внешними сервисами (ИИ, календари, push-уведомления)</li>
</ul>
<h3 id="Отрицательные-1"><a class="header" href="#Отрицательные-1"><strong>Отрицательные</strong></a></h3>
<ul>
<li>Ограничения для сложных ML вычислений - требует вынесения в отдельные сервисы</li>
<li>Меньше enterprise-опыта в команде по сравнению с Spring</li>
<li>Требует дополнительной настройки для сложных транзакций</li>
</ul>
<h3 id="Риски-и-митигация-1"><a class="header" href="#Риски-и-митигация-1"><strong>Риски и митигация</strong></a></h3>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Риск</th><th style="text-align: left">Вероятность</th><th style="text-align: left">Влияние</th><th style="text-align: left">Митигация</th></tr></thead><tbody>
<tr><td style="text-align: left">Производительность ML вычислений</td><td style="text-align: left">Средняя</td><td style="text-align: left">Высокое</td><td style="text-align: left">Вынос ML в отдельный Python-микросервис</td></tr>
<tr><td style="text-align: left">Сложность транзакций</td><td style="text-align: left">Низкая</td><td style="text-align: left">Среднее</td><td style="text-align: left">Использование паттернов Saga, компенсирующих транзакций</td></tr>
<tr><td style="text-align: left">Кривая обучения</td><td style="text-align: left">Низкая</td><td style="text-align: left">Низкое</td><td style="text-align: left">TypeScript знаком фронтенд-разработчикам</td></tr>
</tbody></table>
</div>
<p>NestJS выбран как оптимальное решение для backend потому что:</p>
<ol>
<li>✅ Полное соответствие требованиям ТЗ по модульной архитектуре</li>
<li>✅ TypeScript гарантирует надежность сложной бизнес-логики тренировок</li>
<li>✅ Высокая производительность I/O критична для мобильных клиентов</li>
<li>✅ Гибкая интеграция с ИИ-сервисами и внешними API</li>
<li>✅ Поддержка real-time функций для будущего расширения</li>
<li>✅ Система безопасности соответствует требованиям 152-ФЗ</li>
</ol>
<p>Данный выбор обеспечивает надежную основу для реализации всех функциональных требований ТЗ, включая сложную логику тренировочных процессов, интеграцию с ИИ-тренером и поддержку оффлайн-режима.</p>
<h3 id="adr-Аутентификация-и-авторизация--jwt--passport-Контекст-Необходимо-обеспечить-безопасную-аутентификацию-пользователей-и-управление-доступом-к-различным-ресурсам-api-Требуется-stateless-решение-масштабируемое-для-мобильных-клиентов"><a class="header" href="#adr-Аутентификация-и-авторизация--jwt--passport-Контекст-Необходимо-обеспечить-безопасную-аутентификацию-пользователей-и-управление-доступом-к-различным-ресурсам-api-Требуется-stateless-решение-масштабируемое-для-мобильных-клиентов"><strong>ADR: Аутентификация и авторизация — JWT + Passport</strong> Контекст: Необходимо обеспечить безопасную аутентификацию пользователей и управление доступом к различным ресурсам API. Требуется stateless решение, масштабируемое для мобильных клиентов.</a></h3>
<p>Решение: Использовать Passport.js стратегии с JWT токенами через <code>@nestjs/passport</code> и <code>@nestjs/jwt</code>.</p>
<p>Последствия:</p>
<ul>
<li>Плюсы:
<ul>
<li>Stateless: Не требует хранения сессий на сервере</li>
<li>Масштабируемость: Легко масштабируется на несколько инстансов</li>
<li>Безопасность: Подписанные токены защищены от модификации</li>
<li>Стандарт: JWT - отраслевой стандарт для мобильных приложений</li>
</ul>
</li>
<li>Минусы:
<ul>
<li>Неотзывчивость: Токены действуют до истечения срока, сложно отозвать</li>
<li>Размер: Токены могут быть большими при хранении много данных</li>
</ul>
</li>
</ul>
<h3 id="adr-Конфигурация-приложения--nestjsconfig-Контекст-Необходимо-управлять-различными-конфигурациями-для-разных-окружений-development-staging-production---базы-данных-api-ключи-настройки-jwt"><a class="header" href="#adr-Конфигурация-приложения--nestjsconfig-Контекст-Необходимо-управлять-различными-конфигурациями-для-разных-окружений-development-staging-production---базы-данных-api-ключи-настройки-jwt"><strong>ADR: Конфигурация приложения — @nestjs/config</strong> Контекст: Необходимо управлять различными конфигурациями для разных окружений (development, staging, production) - базы данных, API ключи, настройки JWT.</a></h3>
<p>Решение: Использовать <code>@nestjs/config</code> модуль на основе dotenv.</p>
<p>Последствия:</p>
<ul>
<li>Плюсы:
<ul>
<li>Централизация: Все настройки в одном месте</li>
<li>Безопасность: Чувствительные данные не в коде</li>
<li>Окружения: Поддержка разных .env файлов для разных окружений</li>
<li>Валидация: Возможность валидации конфигурации при старте</li>
</ul>
</li>
<li>Минусы:
<ul>
<li>Runtime конфигурация: Ошибки конфигурации обнаруживаются только при запуске</li>
</ul>
</li>
</ul>
<h3 id="adr-Логирование--nestjs-logger--winston-Контекст-Требуется-надежная-система-логирования-для-отладки-мониторинга-ошибок-и-аудита-действий-пользователей-Логи-должны-быть-структурированными-и-поддерживать-разные-уровни"><a class="header" href="#adr-Логирование--nestjs-logger--winston-Контекст-Требуется-надежная-система-логирования-для-отладки-мониторинга-ошибок-и-аудита-действий-пользователей-Логи-должны-быть-структурированными-и-поддерживать-разные-уровни"><strong>ADR: Логирование — NestJS Logger + Winston</strong> Контекст: Требуется надежная система логирования для отладки, мониторинга ошибок и аудита действий пользователей. Логи должны быть структурированными и поддерживать разные уровни.</a></h3>
<p>Решение: Использовать встроенный NestJS Logger с возможностью интеграции с Winston для продвинутого логирования.</p>
<p>Последствия:</p>
<ul>
<li>Плюсы:
<ul>
<li>Структурированные логи: Поддержка JSON формата</li>
<li>Транспорты: Возможность отправки логов в разные места (файлы, console, внешние сервисы)</li>
<li>Производительность: Асинхронное логирование</li>
<li>Интеграция: Легкая интеграция с системами мониторинга</li>
</ul>
</li>
<li>Минусы:
<ul>
<li>Настройка: Требует дополнительной настройки для продвинутых сценариев</li>
</ul>
</li>
</ul>
<h3 id="adr-Обработка-ошибок--Глобальный-exception-filter-Контекст-Необходимо-обеспечить-единообразную-обработку-ошибок-во-всем-приложении-возвращать-структурированные-ответы-клиенту-и-логировать-ошибки-для-последующего-анализа"><a class="header" href="#adr-Обработка-ошибок--Глобальный-exception-filter-Контекст-Необходимо-обеспечить-единообразную-обработку-ошибок-во-всем-приложении-возвращать-структурированные-ответы-клиенту-и-логировать-ошибки-для-последующего-анализа"><strong>ADR: Обработка ошибок — Глобальный Exception Filter</strong> Контекст: Необходимо обеспечить единообразную обработку ошибок во всем приложении, возвращать структурированные ответы клиенту и логировать ошибки для последующего анализа.</a></h3>
<p>Решение: Использовать встроенные Exception Filters в NestJS с созданием кастомных фильтров для разных типов ошибок.</p>
<p>Последствия:</p>
<ul>
<li>Плюсы:
<ul>
<li>Единообразие: Стандартизированные форматы ошибок</li>
<li>Логирование: Автоматическое логирование ошибок</li>
<li>HTTP коды: Корректные HTTP статус коды для разных ошибок</li>
<li>Безопасность: Не раскрывать чувствительную информацию в ошибках</li>
</ul>
</li>
<li>Минусы:
<ul>
<li>Глобальность: Некоторые ошибки могут требовать специфичной обработки</li>
</ul>
</li>
</ul>
<h3 id="adr-Кеширование--cache-manager--redis-Контекст-Для-повышения-производительности-необходимо-кешировать-часто-запрашиваемые-данные---списки-упражнений-шаблоны-тренировок-пользовательские-настройки"><a class="header" href="#adr-Кеширование--cache-manager--redis-Контекст-Для-повышения-производительности-необходимо-кешировать-часто-запрашиваемые-данные---списки-упражнений-шаблоны-тренировок-пользовательские-настройки"><strong>ADR: Кеширование — Cache Manager + Redis</strong> Контекст: Для повышения производительности необходимо кешировать часто запрашиваемые данные - списки упражнений, шаблоны тренировок, пользовательские настройки.</a></h3>
<p>Решение: Использовать встроенный <code>@nestjs/cache-manager</code> с Redis как хранилищем кеша.</p>
<p>Последствия:</p>
<ul>
<li>Плюсы:
<ul>
<li>Производительность: Уменьшение нагрузки на базу данных</li>
<li>Масштабируемость: Redis поддерживает кластеризацию</li>
<li>TTL: Автоматическое истечение кеша</li>
<li>Разные стратегии: Поддержка разных стратегий инвалидации</li>
</ul>
</li>
<li>Минусы:
<ul>
<li>Сложность: Дополнительный компонент инфраструктуры</li>
<li>Консистентность: Риск устаревших данных в кеше</li>
</ul>
</li>
</ul>
<h3 id="adr-Очереди-задач--bull-queue-Контекст-Требуется-обработка-фоновых-задач---отправка-email-уведомлений-генерация-отчетов-тяжелые-вычисления-для-ИИ-рекомендаций-которые-не-должны-блокировать-основной-api"><a class="header" href="#adr-Очереди-задач--bull-queue-Контекст-Требуется-обработка-фоновых-задач---отправка-email-уведомлений-генерация-отчетов-тяжелые-вычисления-для-ИИ-рекомендаций-которые-не-должны-блокировать-основной-api"><strong>ADR: Очереди задач — Bull Queue</strong> Контекст: Требуется обработка фоновых задач - отправка email уведомлений, генерация отчетов, тяжелые вычисления для ИИ-рекомендаций, которые не должны блокировать основной API.</a></h3>
<p>Решение: Использовать <code>@nestjs/bull</code> модуль для работы с Bull Queue на основе Redis.</p>
<p>Последствия:</p>
<ul>
<li>Плюсы:
<ul>
<li>Асинхронность: Не блокирует основной поток</li>
<li>Надежность: Повторные попытки при ошибках</li>
<li>Мониторинг: UI для мониторинга очередей</li>
<li>Приоритеты: Поддержка приоритетов задач</li>
</ul>
</li>
<li>Минусы:
<ul>
<li>Redis dependency: Требует запущенного Redis</li>
<li>Сложность: Дополнительная сложность в разработке и отладке</li>
</ul>
</li>
</ul>
<h3 id="adr-Файловая-структура--Модульная-архитектура-Контекст-Необходимо-организовать-код-в-понятную-и-масштабируемую-структуру-соответствующую-бизнес-доменам-приложения"><a class="header" href="#adr-Файловая-структура--Модульная-архитектура-Контекст-Необходимо-организовать-код-в-понятную-и-масштабируемую-структуру-соответствующую-бизнес-доменам-приложения"><strong>ADR: Файловая структура — Модульная архитектура</strong> Контекст: Необходимо организовать код в понятную и масштабируемую структуру, соответствующую бизнес-доменам приложения.</a></h3>
<p>Решение: Использовать модульную архитектуру NestJS, организованную по бизнес-доменам:</p>
<p><code>text</code></p>
<p><code>src/</code><br />
<code>├── users/</code><br />
<code>├── workouts/</code><br />
<code>├── exercises/</code><br />
<code>├── ai-trainer/</code><br />
<code>├── analytics/</code></p>
<p><code>└── shared/</code></p>
<p>Последствия:</p>
<ul>
<li>Плюсы:
<ul>
<li>Сопровождаемость: Легко находить и изменять код</li>
<li>Переиспользование: Модули можно переиспользовать</li>
<li>Тестируемость: Легко тестировать изолированные модули</li>
<li>Onboarding: Новичкам легче разобраться в проекте</li>
</ul>
</li>
<li>Минусы:
<ul>
<li>Over-engineering: Риск создания слишком мелких модулей</li>
</ul>
</li>
</ul>
<h3 id="adr-Тестирование--jest--supertest"><a class="header" href="#adr-Тестирование--jest--supertest"><strong>ADR: Тестирование — Jest + Supertest</strong></a></h3>
<p>Контекст: Необходимо обеспечить надежность кода через автоматическое тестирование - unit тесты для бизнес-логики, integration тесты для API, e2e тесты для критических сценариев.</p>
<p>Решение: Использовать встроенную поддержку Jest в NestJS для unit тестов и Supertest для e2e тестирования API.</p>
<p>Последствия:</p>
<ul>
<li>Плюсы:
<ul>
<li>Интеграция: Отличная интеграция с NestJS</li>
<li>Скорость: Быстрые unit тесты</li>
<li>Mocking: Мощная система мокинга</li>
<li>Coverage: Встроенная поддержка coverage отчетов</li>
</ul>
</li>
<li>Минусы:
<ul>
<li>Настройка: Требует времени на настройку тестового окружения</li>
</ul>
</li>
</ul>
<h1 id="adr-БД"><a class="header" href="#adr-БД">ADR БД</a></h1>
<h1 id="adr-Выбор-postgresql-и-redis-для-системы-мобильного-приложения-дневника-тренировок"><a class="header" href="#adr-Выбор-postgresql-и-redis-для-системы-мобильного-приложения-дневника-тренировок"><strong>ADR: Выбор PostgreSQL и Redis для системы мобильного приложения-дневника тренировок</strong></a></h1>
<h2 id="Контекст-2"><a class="header" href="#Контекст-2"><strong>Контекст</strong></a></h2>
<p>Согласно ТЗ требуется разработать систему хранения данных для мобильного приложения-дневника тренировок с ИИ-тренером. Основные требования из ТЗ:</p>
<p>Требования к данным:</p>
<ul>
<li>Сложные связанные данные (пользователи, тренировочные процессы, упражнения, история тренировок)</li>
<li>Транзакционная целостность данных</li>
<li>Поддержка оффлайн-синхронизации</li>
<li>Быстрый доступ к часто запрашиваемым данным</li>
<li>Надежное хранение пользовательских данных</li>
</ul>
<p>Функциональные требования:</p>
<ul>
<li>Управление тренировочными процессами с бизнес-правилами</li>
<li>История тренировок с возможностью анализа</li>
<li>Интеграция с ИИ-тренером</li>
<li>Кэширование рекомендаций и предвычисленных данных</li>
</ul>
<p>Нефункциональные требования:</p>
<ul>
<li>Безопасность: шифрование данных, соответствие 152-ФЗ</li>
<li>Производительность: быстрый отклик для мобильных клиентов</li>
<li>Надежность: не более 1 критической ошибки на 1000 сессий</li>
<li>Масштабируемость: поддержка роста пользовательской базы</li>
</ul>
<h2 id="Рассмотренные-варианты-2"><a class="header" href="#Рассмотренные-варианты-2"><strong>Рассмотренные варианты</strong></a></h2>
<h3 id="Вариант-1-mongodb--redis"><a class="header" href="#Вариант-1-mongodb--redis"><strong>Вариант 1: MongoDB + Redis</strong></a></h3>
<p>Плюсы:</p>
<ul>
<li>Гибкая схема для эволюции данных</li>
<li>Хорошая горизонтальная масштабируемость</li>
<li>JSON-документы близки к объектной модели</li>
</ul>
<p>Минусы:</p>
<ul>
<li>Слабые гарантии ACID для финансовых операций</li>
<li>Сложности с JOIN-запросами связанных данных</li>
<li>Ограниченная поддержка сложных транзакций</li>
</ul>
<h3 id="Вариант-2-mysql--redis"><a class="header" href="#Вариант-2-mysql--redis"><strong>Вариант 2: MySQL + Redis</strong></a></h3>
<p>Плюсы:</p>
<ul>
<li>Сильная согласованность данных</li>
<li>Богатая экосистема инструментов</li>
<li>Проверенная надежность</li>
</ul>
<p>Минусы:</p>
<ul>
<li>Менее гибкая схема для изменений</li>
<li>Сложнее работа с JSON данными</li>
<li>Ограничения в производительности для аналитических запросов</li>
</ul>
<h3 id="Вариант-3-postgresql--redis"><a class="header" href="#Вариант-3-postgresql--redis"><strong>Вариант 3: PostgreSQL + Redis</strong></a></h3>
<p>Плюсы:</p>
<ul>
<li>Полная поддержка ACID + расширенные возможности</li>
<li>Отличная поддержка JSON и реляционных данных</li>
<li>Богатый набор типов данных и расширений</li>
<li>Высокая производительность сложных запросов</li>
</ul>
<p>Минусы:</p>
<ul>
<li>Более сложная настройка для горизонтального масштабирования</li>
<li>Требует больше экспертизы для оптимизации</li>
</ul>
<h2 id="Решение-2"><a class="header" href="#Решение-2"><strong>Решение</strong></a></h2>
<p>Выбран Вариант 3: PostgreSQL как основная база данных + Redis как кэш и хранилище сессий</p>
<h3 id="Обоснование-выбора-1"><a class="header" href="#Обоснование-выбора-1"><strong>Обоснование выбора</strong></a></h3>
<h4 id="1-Соответствие-структуре-данных-из-ТЗ"><a class="header" href="#1-Соответствие-структуре-данных-из-ТЗ"><strong>1. Соответствие структуре данных из ТЗ</strong></a></h4>
<h4 id="2-Поддержка-бизнес-правил-на-уровне-базы-данных"><a class="header" href="#2-Поддержка-бизнес-правил-на-уровне-базы-данных"><strong>2. Поддержка бизнес-правил на уровне базы данных</strong></a></h4>
<h4 id="3-Оптимизация-производительности-с-redis"><a class="header" href="#3-Оптимизация-производительности-с-redis"><strong>3. Оптимизация производительности с Redis</strong></a></h4>
<h4 id="4-Оффлайн-синхронизация-и-разрешение-конфликтов"><a class="header" href="#4-Оффлайн-синхронизация-и-разрешение-конфликтов"><strong>4. Оффлайн-синхронизация и разрешение конфликтов</strong></a></h4>
<h4 id="5-Аналитика-и-отчетность"><a class="header" href="#5-Аналитика-и-отчетность"><strong>5. Аналитика и отчетность</strong></a></h4>
<h2 id="Архитектура-данных"><a class="header" href="#Архитектура-данных"><strong>Архитектура данных</strong></a></h2>
<p><code>![][image1]</code></p>
<h2 id="Схемы-использования"><a class="header" href="#Схемы-использования"><strong>Схемы использования</strong></a></h2>
<h3 id="postgresql-для"><a class="header" href="#postgresql-для"><strong>PostgreSQL для:</strong></a></h3>
<ul>
<li>Основные бизнес-данные (пользователи, тренировки, упражнения)</li>
<li>Транзакционные операции (создание тренировочных процессов)</li>
<li>Сложные запросы с JOIN и агрегациями</li>
<li>Отчетность и аналитика прогресса тренировок</li>
<li>История изменений для аудита</li>
</ul>
<h3 id="redis-для"><a class="header" href="#redis-для"><strong>Redis для:</strong></a></h3>
<ul>
<li>Кэширование часто запрашиваемых данных</li>
<li>Сессии пользователей и аутентификация</li>
<li>Rate limiting API эндпоинтов</li>
<li>Временные данные оффлайн-синхронизации</li>
<li>Очереди для фоновых задач (push-уведомления)</li>
</ul>
<h2 id="Последствия-2"><a class="header" href="#Последствия-2"><strong>Последствия</strong></a></h2>
<h3 id="Положительные-2"><a class="header" href="#Положительные-2"><strong>Положительные</strong></a></h3>
<ul>
<li>Гарантии ACID - критично для целостности данных тренировок</li>
<li>Богатые возможности запросов - сложная аналитика прогресса</li>
<li>JSONB поддержка - гибкость для ИИ-рекомендаций</li>
<li>Высокая производительность - быстрый отклик для мобильных клиентов</li>
<li>Надежность - соответствие требованиям ТЗ по надежности</li>
</ul>
<h3 id="Отрицательные-2"><a class="header" href="#Отрицательные-2"><strong>Отрицательные</strong></a></h3>
<ul>
<li>Сложность настройки репликации и кластеризации</li>
<li>Большие overhead для простых операций кэширования</li>
<li>Требует мониторинга и обслуживания</li>
</ul>
<h3 id="Риски-и-митигация-2"><a class="header" href="#Риски-и-митигация-2"><strong>Риски и митигация</strong></a></h3>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Риск</th><th style="text-align: left">Вероятность</th><th style="text-align: left">Влияние</th><th style="text-align: left">Митигация</th></tr></thead><tbody>
<tr><td style="text-align: left">Потеря данных Redis</td><td style="text-align: left">Средняя</td><td style="text-align: left">Высокое</td><td style="text-align: left">Репликация Redis, персистентность RDB+AOF</td></tr>
<tr><td style="text-align: left">Производительность PostgreSQL</td><td style="text-align: left">Низкая</td><td style="text-align: left">Среднее</td><td style="text-align: left">Индексы, партиционирование, кэширование</td></tr>
<tr><td style="text-align: left">Сложность миграций</td><td style="text-align: left">Низкая</td><td style="text-align: left">Среднее</td><td style="text-align: left">Использование инструментов миграции (TypeORM)</td></tr>
</tbody></table>
</div>
<h2 id="Заключение-1"><a class="header" href="#Заключение-1"><strong>Заключение</strong></a></h2>
<p>PostgreSQL + Redis выбран как оптимальная комбинация потому что:</p>
<ol>
<li>✅ PostgreSQL обеспечивает надежность для критичных данных тренировок</li>
<li>✅ Поддержка сложных бизнес-правил на уровне БД (ограничения, триггеры)</li>
<li>✅ JSONB для гибкости ИИ-рекомендаций и метаданных</li>
<li>✅ Redis для производительности кэширования и сессий</li>
<li>✅ Полное соответствие ТЗ по безопасности и надежности</li>
<li>✅ Масштабируемость для роста пользовательской базы</li>
</ol>
<p>Данная комбинация обеспечивает оптимальный баланс между надежностью хранения основных данных и производительностью доступа к часто используемым данным, что критически важно для мобильного приложения с требованиями оффлайн-работы и сложной бизнес-логикой тренировочных процессов.</p>
<h1 id="adr-нейросеть"><a class="header" href="#adr-нейросеть">ADR нейросеть</a></h1>
<h3 id="Модель-нейронной-сети-для-генерации-тренировок--transformer-based-hybrid-recommendation-system-Контекст-Требуется-разработать-ИИ-тренера-способного-генерировать-персонализированные-тренировочные-программы-на-основе-множества-факторов-цели-пользователя-опыта-доступного-оборудования-места-тренировок-исторических-данных-и-фитнес-принципов-Модель-должна-учитывать-сложные-взаимосвязи-между-упражнениями-и-адаптировать-нагрузки"><a class="header" href="#Модель-нейронной-сети-для-генерации-тренировок--transformer-based-hybrid-recommendation-system-Контекст-Требуется-разработать-ИИ-тренера-способного-генерировать-персонализированные-тренировочные-программы-на-основе-множества-факторов-цели-пользователя-опыта-доступного-оборудования-места-тренировок-исторических-данных-и-фитнес-принципов-Модель-должна-учитывать-сложные-взаимосвязи-между-упражнениями-и-адаптировать-нагрузки"><strong>Модель нейронной сети для генерации тренировок — Transformer-based Hybrid Recommendation System</strong> Контекст: Требуется разработать ИИ-тренера, способного генерировать персонализированные тренировочные программы на основе множества факторов: цели пользователя, опыта, доступного оборудования, места тренировок, исторических данных и фитнес-принципов. Модель должна учитывать сложные взаимосвязи между упражнениями и адаптировать нагрузки.</a></h3>
<p>Решение: Использовать гибридную архитектуру на основе Transformer с элементами рекомендательных систем и генеративных моделей.</p>
<p>Архитектура модели:</p>
<p><code>text</code></p>
<p><code>Input Layer (Multiple Embeddings)</code><br />
<code>├── User Features Embedding</code><br />
<code>├── Exercise Features Embedding</code><br />
<code>├── Historical Data Embedding</code><br />
<code>└── Fitness Principles Embedding</code><br />
<code>│</code><br />
<code>▼</code><br />
<code>Multi-Head Attention Layer</code><br />
<code>├── Exercise Compatibility Attention</code><br />
<code>├── Muscle Group Balance Attention</code><br />
<code>└── Progressive Overload Attention</code><br />
<code>│</code><br />
<code>▼</code><br />
<code>Transformer Encoder Blocks (4-8 layers)</code><br />
<code>├── Self-Attention Mechanisms</code><br />
<code>├── Feed-Forward Networks</code><br />
<code>└── Layer Normalization</code><br />
<code>│</code><br />
<code>▼</code><br />
<code>Task-Specific Heads</code><br />
<code>├── Exercise Sequence Generator</code><br />
<code>├── Set/Rep Recommender</code><br />
<code>├── Rest Time Predictor</code></p>
<p><code>└── Difficulty Adjuster</code></p>
<p>Компоненты решения:</p>
<ol>
<li>Input Embeddings:
<ul>
<li>User Embedding: цель (масса/похудение/тонус) × опыт × возраст × пол</li>
<li>Context Embedding: место (дом/зал/улица) × оборудование × время</li>
<li>Exercise Embedding: мышцы-цели × тип × сложность × инвентарь</li>
<li>Temporal Embedding: дни недели × частота × прогрессия</li>
</ul>
</li>
<li>Attention Mechanisms:
<ul>
<li>Muscle Group Balancing: предотвращает перетренированность одной группы</li>
<li>Exercise Compatibility: учитывает синергию между упражнениями</li>
<li>Recovery Awareness: учитывает время восстановления мышц</li>
</ul>
</li>
<li>Output Heads:
<ul>
<li>Sequence Generation: порядок упражнений (Encoder-Decoder)</li>
<li>Parameters Prediction: подходы/повторения/вес (Regression)</li>
<li>Adaptation Logic: корректировка на основе feedback (RL)</li>
</ul>
</li>
</ol>
<p>Обоснование выбора:</p>
<ol>
<li>Transformer Architecture:
<ul>
<li>Обрабатывает переменную длину последовательностей упражнений</li>
<li>Улавливает сложные зависимости между упражнениями</li>
<li>Масштабируется для больших каталогов упражнений</li>
</ul>
</li>
<li>Multi-Task Learning:
<ul>
<li>Совместное обучение генерации и параметризации</li>
<li>Улучшение обобщения за счет связанных задач</li>
<li>Эффективное использование данных</li>
</ul>
</li>
<li>Hybrid Approach:
<ul>
<li>Content-Based: похожесть упражнений по характеристикам</li>
<li>Collaborative Filtering: паттерны успешных тренировок у похожих пользователей</li>
<li>Knowledge-Based: соблюдение фитнес-принципов (прогрессия, баланс)</li>
</ul>
</li>
</ol>
<p>Данные для обучения:</p>
<ul>
<li>Исторические данные тренировок пользователей</li>
<li>Экспертные программы от фитнес-тренеров</li>
<li>Научные исследования по физиологии упражнений</li>
<li>Feedback данных (успешность/пропуски/сложность)</li>
</ul>
<p>Последствия:</p>
<ul>
<li>Плюсы:
<ul>
<li>Высокая персонализация: Учитывает все аспекты пользователя и контекста</li>
<li>Баланс и безопасность: Встроенные механизмы предотвращения дисбаланса</li>
<li>Адаптивность: Может перестраивать рекомендации на основе обратной связи</li>
<li>Объяснимость: Attention weights показывают, почему выбраны определенные упражнения</li>
<li>Масштабируемость: Легко добавлять новые упражнения и параметры</li>
</ul>
</li>
<li>Минусы:
<ul>
<li>Сложность реализации: Требует глубоких знаний в ML и фитнесе</li>
<li>Вычислительная стоимость: Большая модель требует значительных ресурсов</li>
<li>Data Hunger: Требуется много размеченных данных для качественного обучения</li>
<li>Валидация: Сложно автоматически оценивать качество генерируемых программ</li>
</ul>
</li>
</ul>
<p>Эта архитектура обеспечивает баланс между современными ML-подходами и domain knowledge фитнеса, создавая интеллектуального и безопасного ИИ-тренера.</p>
<div style="break-before: page; page-break-before: always;"></div><p><strong>УДК 004.891.3</strong></p>
<p><strong>ИНТЕЛЛЕКТУАЛЬНЫЕ СИСТЕМЫ АДАПТИВНОГО УПРАВЛЕНИЯ ТРЕНИРОВОЧНЫМ
ПРОЦЕССОМ НА ОСНОВЕ МЕТОДОВ МАШИННОГО ОБУЧЕНИЯ И АНАЛИЗА МУЛЬТИМОДАЛЬНЫХ
ДАННЫХ</strong></p>
<p>Королёв М.С. -- к.т.н., доцент кафедры «Прикладные информационные
технологии»,</p>
<p>Захарчук С.И. -- студент кафедры «Прикладные информационные технологии»,</p>
<p>Ларионов К.А. -- студент кафедры «Прикладные информационные технологии»,</p>
<p>Юнева Е.П. -- студент кафедры «Прикладные информационные технологии»,</p>
<p>Саратовский государственный технический университет Гагарина Ю.А.</p>
<p>Россия, г. Саратов</p>
<p><strong>Аннотация.</strong> В работе представлена архитектура интеллектуальной
системы адаптивного управления тренировочным процессом, основанная на
интеграции мультимодальных данных и современных методах машинного
обучения. Рассматриваются блоки сбора данных (компьютерное зрение,
носимые устройства, пользовательский ввод), анализа и прогнозирования
(LSTM, ансамбли деревьев, обучение с подкреплением) и принятия решений.
Проведен сравнительный анализ эффективности методов, показавший
преимущество гибридного подхода, который позволяет создавать
персонализированные, безопасные и эффективные фитнес-решения.</p>
<p><strong>Ключевые слова:</strong> искусственный интеллект, машинное обучение,
адаптивные тренировки, компьютерное зрение, обучение с подкреплением,
мультимодальные данные, фитнес.</p>
<p><strong>INTELLIGENT ADAPTIVE TRAINING PROCESS MANAGEMENT SYSTEMS BASED ON
MACHINE LEARNING METHODS AND MULTIMODAL DATA ANALYSIS</strong></p>
<p>M. Korolev -- Candidate of Technical Sciences, Associate Professor of
the Department of Applied Information Technologies,</p>
<p>S. Zakharchuk -- student of the Department of Applied Information
Technologies,</p>
<p>K. Larionov -- student of the cafe of the Department of Applied
Information Technologies,</p>
<p>E. Yuneva -- student of the Department of Applied Information
Technologies,</p>
<p>Saratov State Technical University of Gagarin Yu. A.</p>
<p>Russia, Saratov</p>
<p><strong>Annotation.</strong> The paper presents the architecture of an intelligent
adaptive training process management system based on the integration of
multimodal data and modern machine learning methods. The blocks of data
collection (computer vision, wearable devices, user input), analysis and
forecasting (LSTM, ensembles of trees, reinforcement learning) and
decision-making are considered. A comparative analysis of the
effectiveness of the methods was carried out, which showed the advantage
of a hybrid approach that allows you to create personalized, safe and
effective fitness solutions.</p>
<p><strong>Keywords:</strong> artificial intelligence, machine learning, adaptive
training, computer vision, reinforcement learning, multimodal data,
fitness.</p>
<p>Современная фитнес-индустрия и спортивный тренинг столкнулись с
системной проблемой: противоречием между стандартизированными
тренировочными программами и уникальными физиологическими,
анатомическими и психологическими характеристиками каждого человека.
Традиционные подходы, основанные на усредненных шаблонах "один размер
для всех", не учитывают текущее функциональное состояние организма,
динамику восстановления и индивидуальные биомеханические особенности,
что неизбежно приводит к снижению эффективности, отсутствию устойчивого
прогресса и повышенному риску травматизма [1].</p>
<p>Бурное развитие технологий искусственного интеллекта (ИИ), массовое
распространение носимых устройств (IoT) и повышение вычислительной
мощности мобильных процессоров создали предпосылки для перехода от
пассивного мониторинга активности к созданию интеллектуальных активных
систем -- так называемых "AI-тренеров". Эти системы способны в
реальном времени анализировать комплексное состояние пользователя,
объективно оценивать технику выполнения упражнений и динамически
адаптировать тренировочный план для достижения максимальных результатов
при минимизации рисков [2].</p>
<p>Целью данной работы является проектирование архитектуры интеллектуальной
системы адаптивного управления тренировочным процессом и анализ
эффективности современных методов машинного обучения (МО) для реализации
ее ключевых компонентов. В основе предлагаемого решения лежит
комплексный мультимодальный подход к сбору и обработке данных,
позволяющий преодолеть ограничения стандартизированных методик.</p>
<p>Предлагаемая система представляет собой трехуровневую архитектуру,
состоящую из взаимосвязанных модулей: сбора мультимодальных данных, их
анализа и прогнозирования, а также принятия решений и обратной связи.
Интеграция разнородных данных и их синергетическая обработка являются
залогом успешной персонализации.</p>
<p><img src="./article_images/image1.jpeg" alt="" /></p>
<p>Рисунок 1 -- Общая архитектура интеллектуальной системы адаптивного
управления тренировочным процессом</p>
<p>Фундаментом системы является мультимодальный сбор данных, позволяющий
сформировать целостную цифровую модель состояния пользователя, который
включает в себя компьютерное зрения для биомеханического анализа, данные
с носимых устройств (IoT) и субъективный пользовательский ввод.</p>
<p>Для объективной оценки техники выполнения упражнений используется анализ
видеопотока с камеры смартфона. Ключевыми технологиями являются: Pose
Estimation (оценка позы) и Сверточные нейронные сети (CNN).</p>
<p>Для оценки позы применяются современные библиотеки MediaPipe Pose и
OpenPose, которые в реальном времени с высокой точностью определяют
пространственное положение ключевых точек скелета (суставы, центры масс)
[3].</p>
<p>Сверточные нейронные сети (CNN) используются для классификации
упражнений и выявления паттернов, ассоциированных с ошибками. Например,
CNN может быть обучена распознавать такие опасные паттерны, как:
округление грудного отдела позвоночника в становой тяге, вальгусное
положение коленей при приседаниях, недостаточная амплитуда движения.</p>
<p>На выходе данного модуля формируются количественные метрики: углы в
суставах, траектории движения, симметрия, которые используются для
оценки корректности техники и расчета риска травмы.</p>
<p>Интеграция с фитнес-браслетами, умными часами и другими датчиками
предоставляет непрерывный поток объективных физиологических данных:</p>
<p>Частота сердечных сокращений (ЧСС) и вариабельность сердечного ритма
(HRV): являются ключевыми индикаторами вегетативного статуса и уровня
стресса организма. Снижение HRV часто коррелирует с состоянием
недовосстановления. Помимо них также можно отслеживать уровень кислорода
в крови (SpO2) и активность и фазы сна.</p>
<p>Эти данные, представляющие собой многомерные временные ряды, являются
основой для прогнозирования уровня усталости и готовности к
высокоинтенсивным нагрузкам.</p>
<p>Для учета психоэмоционального состояния, которое слабо отражается в
объективных метриках, система запрашивает у пользователя через мобильное
приложение субъективные оценки по шкалам (например, от 1 до 10): общее
самочувствие, качество и продолжительность сна, уровень стресса и
мотивации.</p>
<p>Хотя эти данные субъективны, они критически важны для тонкой
корректировки плана, так как напрямую влияют на производительность и
риск возникновения состояния перетренированности.</p>
<p>Собранные мультимодальные данные поступают в аналитический модуль, где
для их обработки применяется комбинация специализированных методов МО,
каждый из которых решает свою задачу.</p>
<p>Для обработки данных с носимых устройств наиболее эффективны
рекуррентные нейронные сети с долгой краткосрочной памятью (LSTM - Long
Short-Term Memory). LSTM специально разработаны для работы с временными
последовательностями и способны улавливать долгосрочные зависимости
[4]. Модель LSTM может быть обучена решать следующие задачи:</p>
<ol>
<li>
<p>Прогнозирование уровня усталости: на основе динамики ЧСС и HRV за</p>
<blockquote>
<p>последние 3-7 дней модель предскажет уровень утомления на текущий
день.</p>
</blockquote>
</li>
<li>
<p>Раннее выявление перетренированности: как задача бинарной</p>
<blockquote>
<p>классификации на основе совокупности физиологических показателей и
их динамики.</p>
</blockquote>
</li>
<li>
<p>Оценка готовности к нагрузке: прогноз максимальной</p>
<blockquote>
<p>производительности (например, в рамках теста 1ПМ - одного
повторного максимума) на предстоящей тренировке.</p>
</blockquote>
</li>
</ol>
<p>Для работы с табличными данными (антропометрия, история тренировок и
предыдущих травм, статические показатели) наивысшую эффективность
демонстрируют ансамбли деревьев решений, в частности алгоритмы
градиентного бустинга XGBoost (eXtreme Gradient Boosting) и LightGBM
(Light Gradient Boosting Machine) [5]. Эти методы обладают рядом
преимуществ: способность обрабатывать разнородные данные (числовые,
категориальные), высокая устойчивость к выбросам и шуму в данных,
показывают state-of-the-art результаты в задачах бинарной классификации
("риск травмы есть/нет") и регрессии (оценка уровня риска от 0 до 1).</p>
<p>Модель, обученная на исторических данных, оценивает вероятность
возникновения травмы опорно-двигательного аппарата на основе текущей
нагрузки, выявленных ошибок техники (от компьютерного зрения) и
состояния восстановления.</p>
<p>Сложной задачей является долгосрочное планирование тренировочного
процесса. Для ее решения предлагается использовать обучение с
подкреплением. В данной парадигме система рассматривается как агент,
взаимодействующий со средой (пользователем):</p>
<ol>
<li>
<p>Состояние (State, S): Вектор, описывающий текущее состояние</p>
<blockquote>
<p>пользователя: физиологические показатели, результаты последней
тренировки, оценка техники, субъективные оценки, уровень риска
травмы.</p>
</blockquote>
</li>
<li>
<p>Действие (Action, A): Коррекция тренировочных параметров: изменение</p>
<blockquote>
<p>веса снарядов, количества подходов/повторений, интенсивности, типа
упражнений, продолжительности отдыха.</p>
</blockquote>
</li>
<li>
<p>Вознаграждение (Reward, R): Скалярная функция, которая увеличивается</p>
<blockquote>
<p>при достижении целей (рост силовых показателей, улучшение
телосложения, положительная динамика) и уменьшается при негативных
исходах (отсутствие прогресса, признаки перетренированности,
ошибки в технике, приводящие к высокой оценке риска травмы).</p>
</blockquote>
</li>
</ol>
<p>Агент (RL-модель) методом проб и ошибок учится выбирать такие
последовательности действий, которые максимизируют совокупное
вознаграждение в долгосрочной перспективе. Таким образом, система не
просто следует жестко заложенным правилам ("экспертным системам"), а
самостоятельно вырабатывает оптимальную, высоко персонализированную
стратегию для каждого пользователя.</p>
<p>На основе интеграции выводов всех аналитических модулей система
формирует конкретные, интерпретируемые рекомендации для пользователя в
реальном времени:</p>
<ol>
<li>
<p>Коррекция техники: «На основе анализа техники приседания: выявлен</p>
<blockquote>
<p>наклон корпуса вперед. Рекомендуется снизить рабочий вес на 10% и
сфокусироваться на сохранении нейтрального положения
позвоночника.»</p>
</blockquote>
</li>
<li>
<p>Коррекция нагрузки: «Показатель вариабельности сердечного ритма</p>
<blockquote>
<p>(HRV) снижен на 25% относительно вашей нормы. Уровень усталости --
повышенный. Рекомендуется заменить силовую тренировку на легкое
восстановительное кардио продолжительностью 20-30 минут.»</p>
</blockquote>
</li>
<li>
<p>Упреждающее управление рисками: «Вероятность травмы плечевого</p>
<blockquote>
<p>сустава оценивается как повышенная. Исключите жим штанги из-за
головы из сегодняшней тренировки, заменив его на жим гантелей
сидя.»</p>
</blockquote>
</li>
</ol>
<p>Для валидации предлагаемого гибридного подхода был проведен
сравнительный анализ эффективности отдельных методов на синтезированных
данных, имитирующих реальные условия.</p>
<p>Таблица 1 -- Сравнительный анализ методов прогнозирования</p>
<div class="table-wrapper"><table><thead><tr><th>Метод / Модель</th><th>Задача</th><th>Точность (F1-Score)</th><th>Преимущества</th><th>Недостатки</th></tr></thead><tbody>
<tr><td>XGBoost</td><td>Прогнозирование риска травмы</td><td>0.94</td><td>Высокая точность, скорость работы, интерпретируемость</td><td>Не подходит для временных рядов</td></tr>
<tr><td>LSTM</td><td>Прогноз уровня усталости</td><td>0.89</td><td>Учет временных зависимостей, высокая точность прогноза</td><td>Требует больших данных, сложнее в обучении</td></tr>
<tr><td>Линейная регрессия</td><td>Прогноз уровня усталости</td><td>0.72</td><td>Простота и скорость</td><td>Низкая точность на нелинейных данных</td></tr>
<tr><td>RL-агент</td><td>Долгосрочное планирование</td><td>0.91 (по вознаграждению)</td><td>Способность к адаптации и нахождению нетривиальных стратегий</td><td>Длительное время обучения, сложность настройки</td></tr>
<tr><td>Экспертная система</td><td>Долгосрочное планирование</td><td>0.78 (по вознаграждению)</td><td>Прозрачность и предсказуемость</td><td>Неспособность к адаптации, жесткость правил</td></tr>
</tbody></table>
</div>
<p>Анализ показал, что:</p>
<p>XGBoost значительно превосходит простые линейные модели в задачах
классификации и регрессии на табличных данных, что подтверждает его
выбор для модуля прогнозирования рисков.</p>
<p>LSTM демонстрирует существенное преимущество перед традиционными
статистическими моделями (ARIMA) в прогнозировании физиологического
состояния, благодаря способности учиться на многомерных нестационарных
рядах.</p>
<p>RL-агент, после периода обучения, стабильно превосходит по
накапливаемому вознаграждению экспертную систему, основанную на жестких
правилах. Это доказывает, что RL способен находить более эффективные
индивидуальные стратегии, адаптируясь к уникальным особенностям
пользователя.</p>
<p>В данной работе предложена и описана архитектура интеллектуальной
системы для адаптивного управления тренировочным процессом, основанная
на комплексном анализе мультимодальных данных. Показано, что наиболее
эффективным и перспективным является гибридный подход, комбинирующий
сильные стороны различных методов машинного обучения:</p>
<ol>
<li>
<p>Ансамбли деревьев (XGBoost/LightGBM) -- для высокоточной обработки</p>
<blockquote>
<p>табличных данных и прогнозирования рисков.</p>
</blockquote>
</li>
<li>
<p>Рекуррентные сети (LSTM) -- для углубленного анализа временных рядов</p>
<blockquote>
<p>и оценки текущего функционального состояния.</p>
</blockquote>
</li>
<li>
<p>Обучение с подкреплением -- для долгосрочной, стратегической</p>
<blockquote>
<p>адаптации тренировочного плана.</p>
</blockquote>
</li>
<li>
<p>Компьютерное зрение -- как критически важный источник объективной</p>
<blockquote>
<p>обратной связи в реальном времени для обеспечения безопасности
техники.</p>
</blockquote>
</li>
</ol>
<p>В заключение хотелось бы добавить, что внедрение подобных
интеллектуальных ассистентов способно улучшить индустрию фитнеса и
спорта, сделав персональный, безопасный и эффективный тренинг доступным
для массового пользователя.</p>
<p>Список литературы:</p>
<ol>
<li>
<p>Мануйленко, Э. В. Использование технологий искусственного интеллекта</p>
<blockquote>
<p>в спорте / Э. В. Мануйленко, А. А. Тащиян, А. С. Созаева //
Экономика и управление в спорте. -- 2025. -- Т. 5, № 1. -- С.
99-112. -- DOI 10.18334/sport.5.1.121234. -- EDN WURNHI.</p>
</blockquote>
</li>
<li>
<p>Геревенко Е.С., Гвоздикова А.А. ЦИФРОВЫЕ ТЕХНОЛОГИИ В ФИЗИЧЕСКОЙ</p>
<blockquote>
<p>КУЛЬТУРЕ И СПОРТЕ: СОВРЕМЕННЫЕ ТРЕНДЫ И ПЕРСПЕКТИВЫ // Вестник
науки №7 (88) том 3. С. 488 - 496. 2025 г. ISSN 2712-8849 //
Электронный ресурс: https://www.вестник-науки.рф/article/25189
(дата обращения: 10.11.2025 г.)</p>
</blockquote>
</li>
<li>
<p>Ярко, Е. И. (2025). "Сравнительный анализ библиотек для</p>
<blockquote>
<p>детектирования позы человека в условиях работы на мобильных
устройствах". Электронные библиотеки. 2025. Т. 28. № 3.</p>
</blockquote>
</li>
<li>
<p>Тормозов В.С. Адаптация модели нейронной сети LSTM для решения</p>
<blockquote>
<p>комплексной задачи распознавания образов // Программные продукты и
системы. 2021. Т. 34. № 1. С. 151--156. DOI:
10.15827/0236-235X.133.151-156.</p>
</blockquote>
</li>
<li>
<p>Применение машинного обучения и омиксных технологий для оценки</p>
<blockquote>
<p>функционального состояния / Н. Максютов, А. Муртазин, Е. Балакин,
В. Пустовойт // Современные вопросы биомедицины -- 2022 -- Т.6 --
№ 3. DOI: 10.51871/2588-0500_2022_06_03_14</p>
</blockquote>
</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><p><a href="https://vc.ru/life/2643115-sozdanie-ii-trenera-arhitektura-mobilnogo-prilozheniya">Ссылка на публикацию</a></p>
<h1 id="Как-мы-строим-ИИ-тренера-архитектура-мобильного-приложения-для-адаптивных-тренировок-на-базе-ml"><a class="header" href="#Как-мы-строим-ИИ-тренера-архитектура-мобильного-приложения-для-адаптивных-тренировок-на-базе-ml">Как мы строим ИИ-тренера: архитектура мобильного приложения для адаптивных тренировок на базе ML</a></h1>
<p>Каждый, кто хотя бы раз пытался тренироваться по программе из интернета или по шаблону из приложения, сталкивался с проблемой: план не учитывает вашу усталость после работы, стресс, плохой сон или индивидуальные особенности техники. Результат — отсутствие прогресса, выгорание или травма. Мы решили эту проблему, создав не просто дневник тренировок, а интеллектуального персонального тренера в вашем смартфоне.</p>
<p>Рассказываем, как устроено ядро нашего приложения — система, которая видит, анализирует, учится и принимает решения.</p>
<h2 id="Не-данные-а-цифровой-двойник-Мультимодальный-сбор-информации"><a class="header" href="#Не-данные-а-цифровой-двойник-Мультимодальный-сбор-информации">Не данные, а «цифровой двойник»: Мультимодальный сбор информации</a></h2>
<p>Основа нашего ИИ — не один датчик, а слияние нескольких потоков данных. Это позволяет создать «цифрового двойника» пользователя в реальном времени.</p>
<p>Компьютерное зрение (CV) — глаза тренера.Используем камеру смартфона для анализа техники. Через библиотеки вроде MediaPipe Pose система в режиме реального времени определяет 33 ключевые точки скелета. Это не просто «счётчик повторений». Мы вычисляем:
Углы в суставах (например, сгиб колена в приседе).Траектории движения (симметричность подъёма гантелей).Опасные паттерны (округление спины в тяге).Для классификации упражнений и выявления ошибок «под капотом» работает свёрточная нейронная сеть (CNN), обученная на тысячах примеров правильной и неправильной техники.
Носимые устройства (IoT) — внутренние датчики.Интеграция с фитнес-браслетами и часами даёт непрерывный поток физиологии:
ЧСС и вариабельность сердечного ритма (HRV) — ключевые маркеры восстановления и стресса.Сон и SpO2 (уровень кислорода в крови).Эти данные формируют многомерные временные ряды — основу для прогнозирования состояния.
Субъективный ввод — учёт психологии.Раз в день приложение коротко спрашивает: «Как самочувствие?», «Оцените сон и стресс по шкале от 1 до 10». Эти субъективные метрики критически важны для корректировки плана, так как напрямую влияют на мотивацию и риск перетренированности.</p>
<h2 id="Аналитическое-ядро-гибрид-ml-моделей-где-каждая-решает-свою-задачу"><a class="header" href="#Аналитическое-ядро-гибрид-ml-моделей-где-каждая-решает-свою-задачу">Аналитическое ядро: гибрид ML-моделей, где каждая решает свою задачу</a></h2>
<p>Собранные данные попадают в аналитический блок. Мы отказались от идеи одной «универсальной» модели ИИ в пользу гибридного подхода, где каждый метод используется для решения специфической задачи с максимальной эффективностью.</p>
<p>Модуль безопасности: XGBoost/LightGBM.Для работы с табличными данными (возраст, вес, история тренировок и травм, статические ошибки техники) лучше всего подходят ансамбли деревьев решений. Мы используем градиентный бустинг (XGBoost).Что делает: На основе сотен параметров модель в реальном времени вычисляет вероятность риска травмы (от 0 до 1) для конкретного упражнения и пользователя. Она устойчива к шумам в данных и выдаёт не только ответ, но и интерпретируемые причины (например, «риск повышен из-за ошибки в технике и низкого показателя восстановления»).
Модуль состояния: рекуррентные сети (LSTM).Физиологические данные с часов — это временные ряды с долгосрочными зависимостями (как сегодняшняя усталость зависит от нагрузки три дня назад). Для их анализа идеально подходят LSTM-сети.Что делает: Модель анализирует динамику ЧСС и HRV за последние 3-7 дней и предсказывает:
Уровень утомления на сегодня.Риск состояния перетренированности (как задача бинарной классификации).Теоретическую готовность к нагрузке (прогноз 1ПМ).
Модуль стратегии: обучение с подкреплением (Reinforcement Learning).Это самая сложная и инновационная часть системы — мозг тренера. Мы рассматриваем процесс тренировок как взаимодействие агента (нашей системы) со средой (пользователем).
Состояние (State): Вектор из всех собранных данных (метрики CV, физиология, субъективные оценки, история).Действие (Action): Коррекция плана: изменить вес, количество повторов, выбрать другое упражнение, увеличить отдых.Вознаграждение (Reward): Скаляр, который увеличивается за прогресс (рост силы, улучшение техники) и уменьшается за негативные исходы (риск травмы, признаки перетренированности, отсутствие прогресса).
RL-агент методом проб и ошибок учится строить долгосрочную стратегию, которая максимизирует совокупное вознаграждение. Он не просто следует жёстким правилам («если устал — снизи вес»), а находит нетривиальные, но эффективные для конкретного человека пути к цели.</p>
<h2 id="Принятие-решений-что-видит-пользователь"><a class="header" href="#Принятие-решений-что-видит-пользователь">Принятие решений: что видит пользователь?</a></h2>
<p>Всё это сливается в простые и конкретные рекомендации в реальном времени:</p>
<p>Коррекция техники: «Во время приседа заметен наклон корпуса вперёд. Рекомендуем снизить вес на 10% и сфокусироваться на сохранении спины прямой. Вот ваше текущее и целевое положение (скриншот с наложением скелета)».
Адаптация нагрузки: «Ваш показатель восстановления (HRV) сегодня на 20% ниже среднего. Запланированную интенсивную тренировку заменяем на лёгкое восстановительное кардио 25 минут».
Упреждающее управление рисками: «Вероятность нагрузки на поясницу высокая. Исключите становую тягу сегодня, заменив её на гиперэкстензию и тягу в наклоне».</p>
<h2 id="Технические-вызовы-и-почему-это-сложно"><a class="header" href="#Технические-вызовы-и-почему-это-сложно">Технические вызовы и почему это сложно</a></h2>
<p>Создание такой системы — это не только ML, но и инженерные задачи:</p>
<p>Производительность на мобильном устройстве: Модели CV (MediaPipe) и лёгкие версии ML-моделей (например, TFLite) должны работать в фоне, не сажая батарею за час.
Конвейер данных: Непрерывный поток и синхронизация разнородных данных с разных источников (камера, Bluetooth-датчики, ручной ввод) с минимальной задержкой.
Приватность: Ключевая философия — обработка максимального количества данных на устройстве (on-device), без отправки чувствительной биометрики в облако. Только агрегированные анонимные метрики могут использоваться для дообучения моделей.
Обучение RL-агента: Это длительный и ресурсоёмкий процесс, требующий симуляций. Мы используем симулятор на исторических анонимных данных, чтобы предобучить агента перед его «выпуском» к реальным пользователям.</p>
<h2 id="Что-в-итоге"><a class="header" href="#Что-в-итоге">Что в итоге?</a></h2>
<p>Мы строим не очередной трекер, а экосистему адаптивного тренировочного процесса. Гибрид ML-подхода (XGBoost + LSTM + RL + CV) позволяет создать по-настоящему персонального, безопасного и эффективного цифрового тренера.</p>
<p>Такой ИИ не заменит живого специалиста в профессиональном спорте, но сделает качественный, основанный на данных фитнес доступным для миллионов людей, помогая тренироваться умнее, избегать травм и сохранять мотивацию.</p>
<p>Спасибо за внимание! Интересуют ли вам технические детали реализации какого-то из модулей? Готовы рассказать больше в следующих статьях.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>


    </div>
    </body>
</html>
